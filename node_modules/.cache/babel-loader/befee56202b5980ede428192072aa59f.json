{"ast":null,"code":"import _slicedToArray from\"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import{Button,Grid}from'@material-ui/core';import AppBar from'@material-ui/core/AppBar';import Avatar from'@material-ui/core/Avatar';import Card from'@material-ui/core/Card';import CardContent from'@material-ui/core/CardContent';import List from'@material-ui/core/List';import ListItem from'@material-ui/core/ListItem';import ListItemText from'@material-ui/core/ListItemText';import Toolbar from'@material-ui/core/Toolbar';import Typography from'@material-ui/core/Typography';import ConfirmDialog from'app/main/common/ConfirmDialog';import JwtService from'app/services/jwtService';import React,{useContext,useState}from'react';import BindKey from'../BindKey';import PingVoucher from'../PingVoucher';import Points from'../Points';import{SnackbarContext}from'app/context/SnackbarContext';import PremiumKeyAccordian from'../accordian/PremiumKeyAccordian';function AboutTab(_ref){var user=_ref.user,setLoading=_ref.setLoading,reload=_ref.reload,corporateApp=_ref.corporateApp;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),openDialog=_useState2[0],setOpenDialog=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),title=_useState4[0],setTitle=_useState4[1];var _useState5=useState(function(){}),_useState6=_slicedToArray(_useState5,2),action=_useState6[0],setAction=_useState6[1];var context=useContext(SnackbarContext);if(Object.keys(user).length===0)return null;var membership=user.membership,premium_keys=user.premium_keys,user_has_users=user.user_has_users;var axios=JwtService.getAxios();function unbindKey(key){setLoading(true);axios.post('/api/admin/premium-key/unbind',{email:user.email,premium_key:key}).then(function(res){var result=res.data;if(result.status){setLoading(false);reload();}else{reload();context.setMessage(result.message);context.setSeverity('error');context.setOpen(true);}});}function handleOk(){switch(action){case'unbind-parent':unBinParent();break;case'clear-redemptions':clearRedemptions();break;case'log-out':logout();break;default:reload();break;}}function unBinParent(){setTitle(null);setOpenDialog(false);setAction(null);setLoading(true);axios.get(\"/api/admin/unbind-parent_data?email=\".concat(user.email)).then(function(res){var result=res.data;if(result.status){reload();}else{reload();context.setMessage(result.message);context.setSeverity('error');context.setOpen(true);}});}function clearRedemptions(){setOpenDialog(false);setTitle(null);setAction(null);setLoading(true);axios.post('/api/admin/clear-redemption',{email:user.email}).then(function(res){var result=res.data;if(result.status){setLoading(false);}else{reload();context.setMessage(result.message);context.setSeverity('error');context.setOpen(true);}});}function logout(){setTitle(null);setOpenDialog(false);setAction(null);setLoading(true);axios.get(\"/api/admin/logout-customer?email=\".concat(user.email)).then(function(res){setLoading(false);});}function resetPassword(){setLoading(true);axios.get('/api/admin/reset-password-user',{params:{email:user.email}}).then(function(res){var result=res.data;if(result.status){setLoading(false);}else{reload();context.setMessage(result.message);context.setSeverity('error');context.setOpen(true);}});}return/*#__PURE__*/React.createElement(\"div\",{className:\"md:flex max-w-sm md:max-w-full\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex flex-col flex-1 md:ltr:pr-32 md:rtl:pl-32\"},/*#__PURE__*/React.createElement(ConfirmDialog,{title:title,openDialog:openDialog,onConfirm:handleOk}),/*#__PURE__*/React.createElement(Card,{className:\"w-full mb-16\"},/*#__PURE__*/React.createElement(AppBar,{position:\"static\",elevation:0},/*#__PURE__*/React.createElement(Toolbar,{className:\"px-8\"},/*#__PURE__*/React.createElement(Typography,{variant:\"subtitle1\",color:\"inherit\",className:\"flex-1 px-12\"},\"General Information\"))),/*#__PURE__*/React.createElement(CardContent,null,/*#__PURE__*/React.createElement(\"div\",{className:\"mb-24\"},/*#__PURE__*/React.createElement(Typography,{className:\"font-bold mb-4 text-15\"},\"Gender\"),/*#__PURE__*/React.createElement(Typography,null,user.gender)),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-24\"},/*#__PURE__*/React.createElement(Typography,{className:\"font-bold mb-4 text-15\"},\"Birthday\"),/*#__PURE__*/React.createElement(Typography,null,user.dob)),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-24\"},/*#__PURE__*/React.createElement(Typography,{className:\"font-bold mb-4 text-15\"},\"City\"),/*#__PURE__*/React.createElement(Typography,null,user.city.name)),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-24\"},/*#__PURE__*/React.createElement(Typography,{className:\"font-bold mb-4 text-15\"},\"Membership\"),/*#__PURE__*/React.createElement(Typography,null,membership.name)))),/*#__PURE__*/React.createElement(Card,{className:\"w-full mb-16\"},/*#__PURE__*/React.createElement(AppBar,{position:\"static\",elevation:0},/*#__PURE__*/React.createElement(Toolbar,{className:\"px-8\"},/*#__PURE__*/React.createElement(Typography,{variant:\"subtitle1\",color:\"inherit\",className:\"flex-1 px-12\"},\"Savings Information\"))),/*#__PURE__*/React.createElement(CardContent,null,/*#__PURE__*/React.createElement(\"div\",{className:\"mb-24\"},/*#__PURE__*/React.createElement(Typography,{className:\"font-bold mb-4 text-15\"},\"Savings\"),/*#__PURE__*/React.createElement(Typography,null,user.savings)),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-24\"},/*#__PURE__*/React.createElement(Typography,{className:\"font-bold mb-4 text-15\"},\"Redemption Count\"),/*#__PURE__*/React.createElement(Typography,null,user.redemption_count)),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-24\"},/*#__PURE__*/React.createElement(Typography,{className:\"font-bold mb-4 text-15\"},\"Ping/Reimburse Voucher Count\"),/*#__PURE__*/React.createElement(Typography,null,user.ping_vouvhers_count)),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-24\"},/*#__PURE__*/React.createElement(Typography,{className:\"font-bold mb-4 text-15\"},\"Available Vouch Points\"),/*#__PURE__*/React.createElement(Typography,null,user.a_vpoints)),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-24\"},/*#__PURE__*/React.createElement(Typography,{className:\"font-bold mb-4 text-15\"},\"Used Vouch Points\"),/*#__PURE__*/React.createElement(Typography,null,user.u_vpoints)))),/*#__PURE__*/React.createElement(Card,{className:\"w-full mb-16\"},/*#__PURE__*/React.createElement(AppBar,{position:\"static\",elevation:0},/*#__PURE__*/React.createElement(Toolbar,{className:\"px-8\"},/*#__PURE__*/React.createElement(Typography,{variant:\"subtitle1\",color:\"inherit\",className:\"flex-1 px-12\"},\"Contact\"))),/*#__PURE__*/React.createElement(CardContent,null,/*#__PURE__*/React.createElement(\"div\",{className:\"mb-24\"},/*#__PURE__*/React.createElement(Typography,{className:\"font-bold mb-4 text-15\"},\"Tel.\"),/*#__PURE__*/React.createElement(\"div\",{className:\"flex items-center\"},/*#__PURE__*/React.createElement(Typography,null,user.phone))),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-24\"},/*#__PURE__*/React.createElement(Typography,{className:\"font-bold mb-4 text-15\"},\"Emails\"),/*#__PURE__*/React.createElement(\"div\",{className:\"flex items-center\"},/*#__PURE__*/React.createElement(Typography,null,user.email)))))),/*#__PURE__*/React.createElement(\"div\",{className:\"flex flex-col md:w-320\"},corporateApp==='0'&&/*#__PURE__*/React.createElement(Card,{className:\"w-full mb-16\"},/*#__PURE__*/React.createElement(AppBar,{position:\"static\",elevation:0},/*#__PURE__*/React.createElement(Toolbar,{className:\"px-8\"},/*#__PURE__*/React.createElement(Typography,{variant:\"subtitle1\",color:\"inherit\",className:\"flex-1 px-12\"},\"Actions\"))),/*#__PURE__*/React.createElement(CardContent,{className:\"p-0\"},/*#__PURE__*/React.createElement(Grid,{container:true,spacing:2,className:\"mt-4\"},/*#__PURE__*/React.createElement(Grid,{item:true,md:12,className:\"mb-5\"},/*#__PURE__*/React.createElement(PingVoucher,{email:user.email,reload:reload})),/*#__PURE__*/React.createElement(Grid,{item:true,md:12,className:\"mb-5\"},/*#__PURE__*/React.createElement(Points,{email:user.email,reload:reload})),/*#__PURE__*/React.createElement(Grid,{item:true,md:12,className:\"mb-5\"},/*#__PURE__*/React.createElement(Button,{className:\"mx-8 normal-case\",onClick:resetPassword,variant:\"contained\",color:\"secondary\",\"aria-label\":\"Follow\"},\"Reset Password\")),/*#__PURE__*/React.createElement(Grid,{item:true,md:12,className:\"mb-5\"},/*#__PURE__*/React.createElement(Button,{className:\"mx-8 normal-case\",onClick:function onClick(){setTitle('un bind parent');setAction('unbind-parent');setOpenDialog(true);},variant:\"contained\",color:\"secondary\",\"aria-label\":\"Follow\"},\"Unbind Parent\")),/*#__PURE__*/React.createElement(Grid,{item:true,md:12,className:\"mb-5\"},/*#__PURE__*/React.createElement(BindKey,{email:user.email,reload:reload})),/*#__PURE__*/React.createElement(Grid,{item:true,md:12,className:\"mb-5\"},/*#__PURE__*/React.createElement(Button,{className:\"mx-8 normal-case\",onClick:function onClick(){setTitle('clear redemptions');setAction('clear-redemptions');setOpenDialog(true);},variant:\"contained\",color:\"secondary\",\"aria-label\":\"Send Message\"},\"Clear Redemptions\")),/*#__PURE__*/React.createElement(Grid,{item:true,md:12,className:\"mb-5\"},/*#__PURE__*/React.createElement(Button,{className:\"mx-8 normal-case\",onClick:function onClick(){setTitle('logout user');setAction('log-out');setOpenDialog(true);},variant:\"contained\",color:\"secondary\",\"aria-label\":\"Send Message\"},\"Logout\"))))),/*#__PURE__*/React.createElement(Card,{className:\"w-full mb-16\"},/*#__PURE__*/React.createElement(AppBar,{position:\"static\",elevation:0},/*#__PURE__*/React.createElement(Toolbar,{className:\"px-8\"},/*#__PURE__*/React.createElement(Typography,{variant:\"subtitle1\",color:\"inherit\",className:\"flex-1 px-12\"},\"Premium Keys\"))),/*#__PURE__*/React.createElement(CardContent,{className:\"flex flex-wrap p-8\"},premium_keys.map(function(premium_key){return/*#__PURE__*/React.createElement(PremiumKeyAccordian,{premium_key:premium_key,unbind:unbindKey});}))),/*#__PURE__*/React.createElement(Card,{className:\"w-full mb-16\"},/*#__PURE__*/React.createElement(AppBar,{position:\"static\",elevation:0},/*#__PURE__*/React.createElement(Toolbar,{className:\"px-8\"},/*#__PURE__*/React.createElement(Typography,{variant:\"subtitle1\",color:\"inherit\",className:\"flex-1 px-12\"},\"Friends And Family\"))),/*#__PURE__*/React.createElement(CardContent,{className:\"p-0\"},/*#__PURE__*/React.createElement(List,{className:\"p-0\"},user_has_users.map(function(group){return/*#__PURE__*/React.createElement(ListItem,{key:group.id,className:\"px-8\"},/*#__PURE__*/React.createElement(Avatar,{className:\"mx-8\",alt:group.name,src:group.user.avatar}),/*#__PURE__*/React.createElement(ListItemText,{primary:/*#__PURE__*/React.createElement(\"div\",{className:\"flex\"},/*#__PURE__*/React.createElement(Typography,{className:\"font-medium\",color:\"secondary\",paragraph:false},group.user.fname,\" \",group.user.lname),group.relation_type?/*#__PURE__*/React.createElement(Typography,{className:\"mx-4\",paragraph:false},group.relation_type.name):/*#__PURE__*/React.createElement(React.Fragment,null)),secondary:group.user_type}));}))))));}export default AboutTab;","map":null,"metadata":{},"sourceType":"module"}