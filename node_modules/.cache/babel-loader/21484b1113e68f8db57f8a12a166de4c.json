{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import React from'react';import MaterialTable from'material-table';import JwtService from'app/services/jwtService';import Add from'./Add';import Edit from'./Edit';import StatusButton from'./StatusButton';function Vouchers(_ref){var vendor_id=_ref.vendor_id;var tableRef=React.createRef();function getData(_x){return _getData.apply(this,arguments);}function _getData(){_getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(query){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt(\"return\",new Promise(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(resolve){var axios,params,vouchers,resp;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:JwtService.init();axios=JwtService.getAxios();params={page:query.page,limit:query.pageSize,q:query.search,vendor_id:vendor_id};_context.next=5;return axios.get('/api/admin/voucher',{params:params});case 5:vouchers=_context.sent;resp=vouchers.data;if(resp.status){resolve({data:resp.data.data,/// your data array\npage:query.page,// current page number\ntotalCount:resp.data.total// total row number\n});}else{resolve({data:[],/// your data array\npage:0,// current page number\ntotalCount:0// total row number\n});}case 8:case\"end\":return _context.stop();}}},_callee);}));return function(_x2){return _ref3.apply(this,arguments);};}()));case 1:case\"end\":return _context2.stop();}}},_callee2);}));return _getData.apply(this,arguments);}function reload(){console.log(tableRef.current);return tableRef.current&&tableRef.current.onQueryChange();}function Action(_ref2){var action=_ref2.action,data=_ref2.data;switch(action.icon){case'save':return/*#__PURE__*/React.createElement(Add,{reload:reload,vendor_id:vendor_id});case'edit':return/*#__PURE__*/React.createElement(Edit,{reload:reload,voucher_id:data.id?data.id:null,vendor_id:vendor_id});case'status':return/*#__PURE__*/React.createElement(StatusButton,{data:data,reload:reload});default:return\"\";}}return/*#__PURE__*/React.createElement(MaterialTable,{title:\"Vouchers\",data:getData,tableRef:tableRef,columns:[{title:'Name',field:'name'},{title:'Status',field:'status'},{title:'Activation Date',field:'act_date'},{title:'Expiration Date',field:'exp_date'},{title:'Savings',field:'savings'}],actions:[{icon:'save',isFreeAction:true,onClick:function onClick(){}},{icon:'status',onClick:function onClick(){}},{icon:'edit',onClick:function onClick(){}}],options:{pageSize:10,pageSizeOptions:[10,20,50],actionsColumnIndex:-1},components:{Action:Action}});}export default Vouchers;","map":null,"metadata":{},"sourceType":"module"}