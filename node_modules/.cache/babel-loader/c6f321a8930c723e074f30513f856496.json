{"ast":null,"code":"import _slicedToArray from \"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"D:\\\\Projects\\\\live\\\\src\\\\app\\\\fuse-layouts\\\\shared-components\\\\UserMenu.js\";\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport Icon from '@material-ui/core/Icon';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Popover from '@material-ui/core/Popover';\nimport Typography from '@material-ui/core/Typography';\nimport * as authActions from 'app/auth/store/actions';\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, useHistory } from 'react-router-dom';\nimport NotificationImportantIcon from '@material-ui/icons/NotificationImportant';\nimport { Badge, IconButton, List, ListItem, withStyles } from '@material-ui/core';\nimport JwtService from 'app/services/jwtService';\nimport AssignmentReturnedIcon from '@material-ui/icons/AssignmentReturned';\nimport LiveHelpIcon from '@material-ui/icons/LiveHelp';\nimport VpnKeyIcon from '@material-ui/icons/VpnKey';\nvar StyledBadge = withStyles(function (theme) {\n  return {\n    badge: {\n      right: -3,\n      top: 13,\n      border: \"2px solid \".concat(theme.palette.background.paper),\n      padding: '0 4px'\n    }\n  };\n})(Badge);\nvar axios = JwtService.getAxios();\n\nfunction UserMenu(props) {\n  var _this = this;\n\n  var dispatch = useDispatch();\n  var user = useSelector(function (_ref) {\n    var auth = _ref.auth;\n    return auth.user;\n  });\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      userMenu = _useState2[0],\n      setUserMenu = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      notifications = _useState4[0],\n      setNotifications = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      userNotification = _useState6[0],\n      setUserNotification = _useState6[1];\n\n  var history = useHistory();\n  useEffect(function () {\n    setInterval(function () {\n      getNotification();\n    }, 50000);\n  }, []);\n\n  var userMenuClick = function userMenuClick(event) {\n    setUserMenu(event.currentTarget);\n  };\n\n  function getNotification() {\n    axios.get('/api/admin/notification').then(function (res) {\n      var data = res.data.data;\n      setNotifications(data);\n    });\n  }\n\n  var userMenuClose = function userMenuClose() {\n    setUserMenu(null);\n  };\n\n  var userMenuNotifcationClick = function userMenuNotifcationClick(event) {\n    setUserNotification(event.currentTarget);\n  };\n\n  var userMenuNotifcationClose = function userMenuNotifcationClose() {\n    setUserNotification(null);\n  };\n\n  var notificationIcons = {\n    AppNotificationsNewTask: /*#__PURE__*/React.createElement(AssignmentReturnedIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 28\n      }\n    }),\n    AppNotificationsNewCSR: /*#__PURE__*/React.createElement(LiveHelpIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 27\n      }\n    }),\n    AppNotificationsPremiumKeyGeneration: /*#__PURE__*/React.createElement(VpnKeyIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 41\n      }\n    })\n  };\n  var routes = {\n    AppNotificationsNewTask: '/tasks',\n    AppNotificationsNewCSR: '/customer_query',\n    AppNotificationsPremiumKeyGeneration: '/premium_key'\n  };\n\n  function handleNotification(notification) {\n    userMenuNotifcationClose();\n    axios.get(\"/api/admin/mark-notification/\".concat(notification.id));\n    history.push(routes[notification.type.replace(/\\\\/g, '')]);\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(IconButton, {\n    onClick: userMenuNotifcationClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(StyledBadge, {\n    badgeContent: notifications.filter(function (notification) {\n      return !notification.read_at;\n    }).length,\n    color: \"secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(NotificationImportantIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 6\n    }\n  }))), /*#__PURE__*/React.createElement(Popover, {\n    open: Boolean(userNotification),\n    anchorEl: userNotification,\n    onClose: userMenuNotifcationClose,\n    anchorOrigin: {\n      vertical: 'bottom',\n      horizontal: 'center'\n    },\n    transformOrigin: {\n      vertical: 'top',\n      horizontal: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(List, {\n    dense: true,\n    component: \"nav\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 5\n    }\n  }, notifications.length > 0 ? notifications.map(function (notification, index) {\n    return /*#__PURE__*/React.createElement(ListItem, {\n      divider: true,\n      key: index,\n      onClick: function onClick() {\n        return handleNotification(notification);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(ListItemIcon, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }\n    }, notificationIcons[notification.type.replace(/\\\\/g, '')]), /*#__PURE__*/React.createElement(ListItemText, {\n      primary: notification.data.title,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }\n    }));\n  }) : /*#__PURE__*/React.createElement(ListItem, {\n    divider: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ListItemText, {\n    primary: \"No notification found\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 8\n    }\n  })))), /*#__PURE__*/React.createElement(Button, {\n    className: \"h-64\",\n    onClick: userMenuClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 4\n    }\n  }, user.data.photoURL ? /*#__PURE__*/React.createElement(Avatar, {\n    className: \"\",\n    alt: \"user photo\",\n    src: user.data.photoURL,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 6\n    }\n  }) : /*#__PURE__*/React.createElement(Avatar, {\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 6\n    }\n  }, user.data.displayName[0]), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"hidden md:flex flex-col mx-12 items-start\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    component: \"span\",\n    className: \"normal-case font-600 flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 6\n    }\n  }, user.data.displayName), /*#__PURE__*/React.createElement(Typography, {\n    className: \"text-11 capitalize\",\n    color: \"textSecondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 6\n    }\n  }, user.role.toString())), /*#__PURE__*/React.createElement(Icon, {\n    className: \"text-16 hidden sm:flex\",\n    variant: \"action\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 5\n    }\n  }, \"keyboard_arrow_down\")), /*#__PURE__*/React.createElement(Popover, {\n    open: Boolean(userMenu),\n    anchorEl: userMenu,\n    onClose: userMenuClose,\n    anchorOrigin: {\n      vertical: 'bottom',\n      horizontal: 'center'\n    },\n    transformOrigin: {\n      vertical: 'top',\n      horizontal: 'center'\n    },\n    classes: {\n      paper: 'py-8'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MenuItem, {\n    component: Link,\n    to: \"/user/\".concat(user.data.id),\n    onClick: userMenuClose,\n    role: \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(ListItemIcon, {\n    className: \"min-w-40\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 8\n    }\n  }, \"account_circle\")), /*#__PURE__*/React.createElement(ListItemText, {\n    primary: \"My Profile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }\n  })), /*#__PURE__*/React.createElement(MenuItem, {\n    onClick: function onClick() {\n      dispatch(authActions.logoutUser());\n      userMenuClose();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(ListItemIcon, {\n    className: \"min-w-40\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 8\n    }\n  }, \"exit_to_app\")), /*#__PURE__*/React.createElement(ListItemText, {\n    primary: \"Logout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }\n  })))));\n}\n\nexport default UserMenu;","map":{"version":3,"sources":["D:/Projects/live/src/app/fuse-layouts/shared-components/UserMenu.js"],"names":["Avatar","Button","Icon","ListItemIcon","ListItemText","MenuItem","Popover","Typography","authActions","React","useEffect","useState","useDispatch","useSelector","Link","useHistory","NotificationImportantIcon","Badge","IconButton","List","ListItem","withStyles","JwtService","AssignmentReturnedIcon","LiveHelpIcon","VpnKeyIcon","StyledBadge","theme","badge","right","top","border","palette","background","paper","padding","axios","getAxios","UserMenu","props","dispatch","user","auth","userMenu","setUserMenu","notifications","setNotifications","userNotification","setUserNotification","history","setInterval","getNotification","userMenuClick","event","currentTarget","get","then","res","data","userMenuClose","userMenuNotifcationClick","userMenuNotifcationClose","notificationIcons","AppNotificationsNewTask","AppNotificationsNewCSR","AppNotificationsPremiumKeyGeneration","routes","handleNotification","notification","id","push","type","replace","filter","read_at","length","Boolean","vertical","horizontal","map","index","title","photoURL","displayName","role","toString","logoutUser"],"mappings":"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","sourcesContent":["import Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport Icon from '@material-ui/core/Icon';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Popover from '@material-ui/core/Popover';\nimport Typography from '@material-ui/core/Typography';\nimport * as authActions from 'app/auth/store/actions';\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, useHistory } from 'react-router-dom';\nimport NotificationImportantIcon from '@material-ui/icons/NotificationImportant';\nimport { Badge, IconButton, List, ListItem, withStyles } from '@material-ui/core';\nimport JwtService from 'app/services/jwtService';\nimport AssignmentReturnedIcon from '@material-ui/icons/AssignmentReturned';\nimport LiveHelpIcon from '@material-ui/icons/LiveHelp';\nimport VpnKeyIcon from '@material-ui/icons/VpnKey';\n\nconst StyledBadge = withStyles(theme => ({\n\tbadge: {\n\t\tright: -3,\n\t\ttop: 13,\n\t\tborder: `2px solid ${theme.palette.background.paper}`,\n\t\tpadding: '0 4px'\n\t}\n}))(Badge);\n\nconst axios = JwtService.getAxios();\nfunction UserMenu(props) {\n\tconst dispatch = useDispatch();\n\tconst user = useSelector(({ auth }) => auth.user);\n\tconst [userMenu, setUserMenu] = useState(null);\n\tconst [notifications, setNotifications] = useState([]);\n\tconst [userNotification, setUserNotification] = useState(null);\n\tconst history = useHistory();\n\tuseEffect(() => {\n\t\tsetInterval(() => {\n\t\t\tgetNotification();\n\t\t}, 50000);\n\t}, []);\n\tconst userMenuClick = event => {\n\t\tsetUserMenu(event.currentTarget);\n\t};\n\n\tfunction getNotification() {\n\t\taxios.get('/api/admin/notification').then(res => {\n\t\t\tconst data = res.data.data;\n\t\t\tsetNotifications(data);\n\t\t});\n\t}\n\tconst userMenuClose = () => {\n\t\tsetUserMenu(null);\n\t};\n\n\tconst userMenuNotifcationClick = event => {\n\t\tsetUserNotification(event.currentTarget);\n\t};\n\n\tconst userMenuNotifcationClose = () => {\n\t\tsetUserNotification(null);\n\t};\n\n\tconst notificationIcons = {\n\t\tAppNotificationsNewTask: <AssignmentReturnedIcon />,\n\t\tAppNotificationsNewCSR: <LiveHelpIcon />,\n\t\tAppNotificationsPremiumKeyGeneration: <VpnKeyIcon />\n\t};\n\tconst routes = {\n\t\tAppNotificationsNewTask: '/tasks',\n\t\tAppNotificationsNewCSR: '/customer_query',\n\t\tAppNotificationsPremiumKeyGeneration: '/premium_key'\n\t};\n\tfunction handleNotification(notification) {\n\t\tuserMenuNotifcationClose();\n\t\taxios.get(`/api/admin/mark-notification/${notification.id}`);\n\t\thistory.push(routes[notification.type.replace(/\\\\/g, '')]);\n\t}\n\treturn (\n\t\t<>\n\t\t\t<IconButton onClick={userMenuNotifcationClick}>\n\t\t\t\t<StyledBadge\n\t\t\t\t\tbadgeContent={notifications.filter(notification => !notification.read_at).length}\n\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t>\n\t\t\t\t\t<NotificationImportantIcon />\n\t\t\t\t</StyledBadge>\n\t\t\t</IconButton>\n\n\t\t\t<Popover\n\t\t\t\topen={Boolean(userNotification)}\n\t\t\t\tanchorEl={userNotification}\n\t\t\t\tonClose={userMenuNotifcationClose}\n\t\t\t\tanchorOrigin={{\n\t\t\t\t\tvertical: 'bottom',\n\t\t\t\t\thorizontal: 'center'\n\t\t\t\t}}\n\t\t\t\ttransformOrigin={{\n\t\t\t\t\tvertical: 'top',\n\t\t\t\t\thorizontal: 'center'\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<List dense component=\"nav\">\n\t\t\t\t\t{notifications.length > 0 ? (\n\t\t\t\t\t\tnotifications.map((notification, index) => (\n\t\t\t\t\t\t\t<ListItem divider key={index} onClick={() => handleNotification(notification)}>\n\t\t\t\t\t\t\t\t<ListItemIcon>{notificationIcons[notification.type.replace(/\\\\/g, '')]}</ListItemIcon>\n\t\t\t\t\t\t\t\t<ListItemText primary={notification.data.title} />\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t))\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<ListItem divider>\n\t\t\t\t\t\t\t<ListItemText primary=\"No notification found\" />\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t)}\n\t\t\t\t</List>\n\t\t\t</Popover>\n\t\t\t<Button className=\"h-64\" onClick={userMenuClick}>\n\t\t\t\t{user.data.photoURL ? (\n\t\t\t\t\t<Avatar className=\"\" alt=\"user photo\" src={user.data.photoURL} />\n\t\t\t\t) : (\n\t\t\t\t\t<Avatar className=\"\">{user.data.displayName[0]}</Avatar>\n\t\t\t\t)}\n\n\t\t\t\t<div className=\"hidden md:flex flex-col mx-12 items-start\">\n\t\t\t\t\t<Typography component=\"span\" className=\"normal-case font-600 flex\">\n\t\t\t\t\t\t{user.data.displayName}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<Typography className=\"text-11 capitalize\" color=\"textSecondary\">\n\t\t\t\t\t\t{user.role.toString()}\n\t\t\t\t\t</Typography>\n\t\t\t\t</div>\n\n\t\t\t\t<Icon className=\"text-16 hidden sm:flex\" variant=\"action\">\n\t\t\t\t\tkeyboard_arrow_down\n\t\t\t\t</Icon>\n\t\t\t</Button>\n\n\t\t\t<Popover\n\t\t\t\topen={Boolean(userMenu)}\n\t\t\t\tanchorEl={userMenu}\n\t\t\t\tonClose={userMenuClose}\n\t\t\t\tanchorOrigin={{\n\t\t\t\t\tvertical: 'bottom',\n\t\t\t\t\thorizontal: 'center'\n\t\t\t\t}}\n\t\t\t\ttransformOrigin={{\n\t\t\t\t\tvertical: 'top',\n\t\t\t\t\thorizontal: 'center'\n\t\t\t\t}}\n\t\t\t\tclasses={{\n\t\t\t\t\tpaper: 'py-8'\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<>\n\t\t\t\t\t<MenuItem component={Link} to={`/user/${user.data.id}`} onClick={userMenuClose} role=\"button\">\n\t\t\t\t\t\t<ListItemIcon className=\"min-w-40\">\n\t\t\t\t\t\t\t<Icon>account_circle</Icon>\n\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"My Profile\" />\n\t\t\t\t\t</MenuItem>\n\t\t\t\t\t<MenuItem\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tdispatch(authActions.logoutUser());\n\t\t\t\t\t\t\tuserMenuClose();\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<ListItemIcon className=\"min-w-40\">\n\t\t\t\t\t\t\t<Icon>exit_to_app</Icon>\n\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"Logout\" />\n\t\t\t\t\t</MenuItem>\n\t\t\t\t</>\n\t\t\t</Popover>\n\t\t</>\n\t);\n}\n\nexport default UserMenu;\n"]},"metadata":{},"sourceType":"module"}