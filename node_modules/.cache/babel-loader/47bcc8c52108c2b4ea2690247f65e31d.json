{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"D:\\\\Projects\\\\live\\\\src\\\\app\\\\main\\\\vendor\\\\Vendorold.js\";\nimport React, { useState, useEffect } from 'react';\nimport JwtService from 'app/services/jwtService';\nimport { Grid } from '@material-ui/core';\nimport MaterialTable from 'material-table';\nimport { useHistory } from 'react-router';\nimport FusePageSimple from '@fuse/core/FusePageSimple';\nimport { connect } from 'react-redux';\n\nfunction Vendors(_ref) {\n  var user = _ref.user;\n  // const [From, setFrom] = useState([]);\n  // const [To, setTo] = useState([]);\n  // const [count, setCount] = useState([]);\n  // const [page, setPage] = useState([]);\n  // const [rowsperpage, setRowsPerPage] = useState([]);\n  var history = useHistory();\n\n  function getData(_x) {\n    return _getData.apply(this, arguments);\n  }\n\n  function _getData() {\n    _getData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(query) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              return _context2.abrupt(\"return\", new Promise( /*#__PURE__*/function () {\n                var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(resolve) {\n                  var axios, params, vendors, resp;\n                  return _regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          JwtService.init();\n                          axios = JwtService.getAxios();\n                          params = {\n                            page: query.page,\n                            // page: ((query.page ==0 )?1:query.page),\n                            limit: query.pageSize,\n                            q: query.search\n                          }; // setFrom((((query.page ==0 )?1:query.page) * query.pageSize)-query.pageSize+1)\n                          // setTo((((query.page ==0 )?1:query.page) * query.pageSize))\n                          // setPage(query.pageSize)\n                          // setRowsPerPage(query.pageSize);\n\n                          if (user.data.role === 'vendor') params.parent_id = user.data.xid;else params.parent_id = 0;\n                          _context.next = 6;\n                          return axios.get('/api/admin/vendor', {\n                            params: params\n                          });\n\n                        case 6:\n                          vendors = _context.sent;\n                          resp = vendors.data;\n\n                          if (resp.status) {\n                            // setCount(resp.data.total)\n                            resolve({\n                              data: resp.data.data,\n                              /// your data array\n                              page: query.page,\n                              // current page number\n                              // page: ((query.page ==0 )?1:query.page), // current page number\n                              totalCount: resp.data.total // total row number\n\n                            });\n                          } else {\n                            resolve({\n                              data: [],\n                              /// your data array\n                              page: 0,\n                              // current page number\n                              totalCount: 10 // total row number\n\n                            });\n                          }\n\n                        case 9:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee);\n                }));\n\n                return function (_x2) {\n                  return _ref2.apply(this, arguments);\n                };\n              }()));\n\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _getData.apply(this, arguments);\n  }\n\n  function actions() {\n    var actions = [];\n\n    if (['admin', 'it', 'creative', 'alliance'].includes(user.data.role)) {\n      actions.push({\n        icon: 'visibility',\n        tooltip: 'View Vendor',\n        onClick: function onClick(event, data) {\n          return history.push('/vendor/' + data.id + \"/about\");\n        }\n      });\n    }\n\n    return actions;\n  }\n\n  return /*#__PURE__*/React.createElement(FusePageSimple, {\n    content: /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      md: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(MaterialTable, {\n      title: \"Vendors\",\n      data: getData,\n      columns: [{\n        title: 'Name',\n        field: 'name',\n        width: 30\n      }, {\n        title: 'Locality',\n        field: 'locality',\n        width: 30\n      }, {\n        title: 'City',\n        field: 'city.name',\n        width: 10\n      }, {\n        title: 'Status',\n        field: 'status',\n        width: 10\n      }],\n      actions: actions(),\n      options: {\n        pageSize: 10,\n        pageSizeOptions: [10, 20, 50],\n        actionsColumnIndex: -1\n      } // components={{\n      // \tPagination: ({from,to,count,page}) => {\n      // \t  return <CustomPaginationComponent params={{ From:From,To:To, count:count,page:page }} />;\n      // \t}\n      //   }}\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 7\n      }\n    }))),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 3\n    }\n  });\n}\n\nfunction mapStateToProps(_ref3) {\n  var auth = _ref3.auth;\n  return {\n    user: auth.user\n  };\n}\n\nexport default connect(mapStateToProps)(Vendors);","map":{"version":3,"sources":["D:/Projects/live/src/app/main/vendor/Vendorold.js"],"names":["React","useState","useEffect","JwtService","Grid","MaterialTable","useHistory","FusePageSimple","connect","Vendors","user","history","getData","query","Promise","resolve","init","axios","getAxios","params","page","limit","pageSize","q","search","data","role","parent_id","xid","get","vendors","resp","status","totalCount","total","actions","includes","push","icon","tooltip","onClick","event","id","title","field","width","pageSizeOptions","actionsColumnIndex","mapStateToProps","auth"],"mappings":"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","sourcesContent":["import React, { useState,useEffect } from 'react';\nimport JwtService from 'app/services/jwtService';\nimport {Grid} from '@material-ui/core';\nimport MaterialTable from 'material-table';\nimport { useHistory } from 'react-router';\nimport FusePageSimple from '@fuse/core/FusePageSimple';\nimport { connect } from 'react-redux';\n\n\n\nfunction Vendors({ user }) {\n\t// const [From, setFrom] = useState([]);\n\t// const [To, setTo] = useState([]);\n\t// const [count, setCount] = useState([]);\n\t// const [page, setPage] = useState([]);\n\t// const [rowsperpage, setRowsPerPage] = useState([]);\n\tconst history = useHistory()\n\n\tasync function getData(query) {\n\t\treturn new Promise(async resolve => {\n\t\t\tJwtService.init();\n\t\t\tconst axios = JwtService.getAxios();\n\t\t\tconst params = {\n\t\t\t\tpage: query.page,\n\t\t\t\t// page: ((query.page ==0 )?1:query.page),\n\t\t\t\tlimit: query.pageSize,\n\t\t\t\tq: query.search\n\t\t\t};\n\t\t\t// setFrom((((query.page ==0 )?1:query.page) * query.pageSize)-query.pageSize+1)\n\t\t\t// setTo((((query.page ==0 )?1:query.page) * query.pageSize))\n\t\t\t// setPage(query.pageSize)\n\t\t\t// setRowsPerPage(query.pageSize);\n\t\t\tif (user.data.role === 'vendor') params.parent_id = user.data.xid;\n\t\t\telse params.parent_id = 0;\n\t\t\tconst vendors = await axios.get('/api/admin/vendor', {\n\t\t\t\tparams\n\t\t\t});\n\t\t\tconst resp = vendors.data;\n\t\t\tif (resp.status) {\n\t\t\t\t// setCount(resp.data.total)\n\t\t\t\tresolve({\n\t\t\t\t\tdata: resp.data.data, /// your data array\n\t\t\t\t\tpage: query.page, // current page number\n\t\t\t\t\t// page: ((query.page ==0 )?1:query.page), // current page number\n\t\t\t\t\ttotalCount: resp.data.total // total row number\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tresolve({\n\t\t\t\t\tdata: [], /// your data array\n\t\t\t\t\tpage: 0, // current page number\n\t\t\t\t\ttotalCount: 10 // total row number\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t});\n\t}\n\n\tfunction actions() {\n\t\tconst actions = [];\n\n\t\tif (['admin', 'it', 'creative', 'alliance'].includes(user.data.role)) {\n\t\t\tactions.push({\n\t\t\t\ticon: 'visibility',\n\t\t\t\ttooltip: 'View Vendor',\n\t\t\t\tonClick: (event, data) => history.push('/vendor/' + data.id+\"/about\")\n\t\t\t});\n\t\t}\n\t\treturn actions;\n\t}\n\n\treturn (\n\t\t<FusePageSimple\n\t\t\tcontent={\n\t\t\t\t<Grid container>\n\t\t\t\t\t<Grid item md={12}>\n\t\t\t\t\t\t<MaterialTable\n\t\t\t\t\t\t\ttitle=\"Vendors\"\n\t\t\t\t\t\t\tdata={getData}\n\t\t\t\t\t\t\tcolumns={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'Name',\n\t\t\t\t\t\t\t\t\tfield: 'name',\n\t\t\t\t\t\t\t\t\twidth: 30\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'Locality',\n\t\t\t\t\t\t\t\t\tfield: 'locality',\n\t\t\t\t\t\t\t\t\twidth: 30\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'City',\n\t\t\t\t\t\t\t\t\tfield: 'city.name',\n\t\t\t\t\t\t\t\t\twidth: 10\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'Status',\n\t\t\t\t\t\t\t\t\tfield: 'status',\n\t\t\t\t\t\t\t\t\twidth: 10\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tactions={actions()}\n\t\t\t\t\t\t\toptions={{\n\t\t\t\t\t\t\t\tpageSize: 10,\n\t\t\t\t\t\t\t\tpageSizeOptions: [10, 20, 50],\n\t\t\t\t\t\t\t\tactionsColumnIndex: -1\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t// components={{\n\t\t\t\t\t\t\t// \tPagination: ({from,to,count,page}) => {\n\t\t\t\t\t\t\t// \t  return <CustomPaginationComponent params={{ From:From,To:To, count:count,page:page }} />;\n\t\t\t\t\t\t\t// \t}\n\t\t\t\t\t\t\t//   }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t}\n\t\t/>\n\t);\n}\nfunction mapStateToProps({ auth }) {\n\treturn {\n\t\tuser: auth.user\n\t};\n}\n\nexport default connect(mapStateToProps)(Vendors);\n"]},"metadata":{},"sourceType":"module"}