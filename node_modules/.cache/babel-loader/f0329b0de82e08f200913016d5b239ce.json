{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useState}from'react';import MaterialTable from'material-table';import JwtService from'app/services/jwtService';import{UserContext}from'app/context/UserContext';import moment from'moment';var axios=JwtService.getAxios();function Posts(_ref){var id=_ref.id;var tableRef=React.createRef();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),orders=_useState2[0],setOrders=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var userContext=useContext(UserContext);useEffect(function(){if(!loading)getData();// eslint-disable-next-line\n},[]);function getData(){return _getData.apply(this,arguments);}function _getData(){_getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var url,vouchers,resp;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setLoading(true);url=id?\"/api/admin/tasks/\".concat(id,\"/posts\"):\"/api/admin/posts\";if(id&&userContext.user.user_type==='creative'){url+=\"?user_id=\".concat(userContext.user.id);}_context.next=6;return axios.get(url);case 6:vouchers=_context.sent;resp=vouchers.data;if(resp.status){setOrders(resp.data.posts);}else{setOrders([]);}setLoading(false);_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);setOrders([]);setLoading(false);case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);}));return _getData.apply(this,arguments);}function columns(){var column=[{title:'Title',field:'title',render:function render(rowData){return/*#__PURE__*/React.createElement(\"a\",{href:\"\".concat(rowData.link),target:\"_blank\",rel:\"noopener noreferrer\"},rowData.title);}},{title:'Link',field:'link',render:function render(rowData){return/*#__PURE__*/React.createElement(\"a\",{href:\"\".concat(rowData.link),target:\"_blank\",rel:\"noopener noreferrer\"},rowData.link);}}];if(!id){column.push({title:'Vendor',field:'vendor_name'});}column.push({title:'Created At',field:'created_at',render:function render(rowData){var date=moment(rowData.created_at);return date.format('dddd, MMMM Do YYYY, h:mm:ss a');}});return column;}return/*#__PURE__*/React.createElement(MaterialTable,{title:\"Posts\",data:orders,ref:tableRef,columns:columns(),isLoading:loading,options:{pageSize:10,pageSizeOptions:[10,20,50],actionsColumnIndex:-1,exportButton:true}});}export default Posts;","map":null,"metadata":{},"sourceType":"module"}