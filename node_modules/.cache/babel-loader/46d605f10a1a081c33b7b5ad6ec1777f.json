{"ast":null,"code":"import _classCallCheck from \"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/database';\nimport config from './firebaseServiceConfig';\n\nvar FirebaseService = /*#__PURE__*/function () {\n  function FirebaseService() {\n    var _this = this;\n\n    _classCallCheck(this, FirebaseService);\n\n    this.getUserData = function (userId) {\n      if (!firebase.apps.length) {\n        return false;\n      }\n\n      return new Promise(function (resolve, reject) {\n        _this.db.ref(\"users/\".concat(userId)).once('value').then(function (snapshot) {\n          var user = snapshot.val();\n          resolve(user);\n        });\n      });\n    };\n\n    this.updateUserData = function (user) {\n      if (!firebase.apps.length) {\n        return false;\n      }\n\n      return _this.db.ref(\"users/\".concat(user.uid)).set(user);\n    };\n\n    this.onAuthStateChanged = function (callback) {\n      if (!_this.auth) {\n        return;\n      }\n\n      _this.auth.onAuthStateChanged(callback);\n    };\n\n    this.signOut = function () {\n      if (!_this.auth) {\n        return;\n      }\n\n      _this.auth.signOut();\n    };\n  }\n\n  _createClass(FirebaseService, [{\n    key: \"init\",\n    value: function init(success) {\n      if (Object.entries(config).length === 0 && config.constructor === Object) {\n        if (process.env.NODE_ENV === 'development') {\n          console.warn('Missing Firebase Configuration at src/app/services/firebaseService/firebaseServiceConfig.js');\n        }\n\n        success(false);\n        return;\n      }\n\n      if (firebase.apps.length) {\n        return;\n      }\n\n      firebase.initializeApp(config);\n      this.db = firebase.database();\n      this.auth = firebase.auth();\n      success(true);\n    }\n  }]);\n\n  return FirebaseService;\n}();\n\nvar instance = new FirebaseService();\nexport default instance;","map":{"version":3,"sources":["D:/Projects/live/src/app/services/firebaseService/firebaseService.js"],"names":["firebase","config","FirebaseService","getUserData","userId","apps","length","Promise","resolve","reject","db","ref","once","then","snapshot","user","val","updateUserData","uid","set","onAuthStateChanged","callback","auth","signOut","success","Object","entries","constructor","process","env","NODE_ENV","console","warn","initializeApp","database","instance"],"mappings":";;AAAA,OAAOA,QAAP,MAAqB,cAArB;AACA,OAAO,eAAP;AACA,OAAO,mBAAP;AACA,OAAOC,MAAP,MAAmB,yBAAnB;;IAEMC,e;;;;;;SAqBLC,W,GAAc,UAAAC,MAAM,EAAI;AACvB,UAAI,CAACJ,QAAQ,CAACK,IAAT,CAAcC,MAAnB,EAA2B;AAC1B,eAAO,KAAP;AACA;;AACD,aAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACvC,QAAA,KAAI,CAACC,EAAL,CACEC,GADF,iBACeP,MADf,GAEEQ,IAFF,CAEO,OAFP,EAGEC,IAHF,CAGO,UAAAC,QAAQ,EAAI;AACjB,cAAMC,IAAI,GAAGD,QAAQ,CAACE,GAAT,EAAb;AACAR,UAAAA,OAAO,CAACO,IAAD,CAAP;AACA,SANF;AAOA,OARM,CAAP;AASA,K;;SAEDE,c,GAAiB,UAAAF,IAAI,EAAI;AACxB,UAAI,CAACf,QAAQ,CAACK,IAAT,CAAcC,MAAnB,EAA2B;AAC1B,eAAO,KAAP;AACA;;AACD,aAAO,KAAI,CAACI,EAAL,CAAQC,GAAR,iBAAqBI,IAAI,CAACG,GAA1B,GAAiCC,GAAjC,CAAqCJ,IAArC,CAAP;AACA,K;;SAEDK,kB,GAAqB,UAAAC,QAAQ,EAAI;AAChC,UAAI,CAAC,KAAI,CAACC,IAAV,EAAgB;AACf;AACA;;AACD,MAAA,KAAI,CAACA,IAAL,CAAUF,kBAAV,CAA6BC,QAA7B;AACA,K;;SAEDE,O,GAAU,YAAM;AACf,UAAI,CAAC,KAAI,CAACD,IAAV,EAAgB;AACf;AACA;;AACD,MAAA,KAAI,CAACA,IAAL,CAAUC,OAAV;AACA,K;;;;;WAtDD,cAAKC,OAAL,EAAc;AACb,UAAIC,MAAM,CAACC,OAAP,CAAezB,MAAf,EAAuBK,MAAvB,KAAkC,CAAlC,IAAuCL,MAAM,CAAC0B,WAAP,KAAuBF,MAAlE,EAA0E;AACzE,YAAIG,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,aAA7B,EAA4C;AAC3CC,UAAAA,OAAO,CAACC,IAAR,CACC,6FADD;AAGA;;AACDR,QAAAA,OAAO,CAAC,KAAD,CAAP;AACA;AACA;;AAED,UAAIxB,QAAQ,CAACK,IAAT,CAAcC,MAAlB,EAA0B;AACzB;AACA;;AACDN,MAAAA,QAAQ,CAACiC,aAAT,CAAuBhC,MAAvB;AACA,WAAKS,EAAL,GAAUV,QAAQ,CAACkC,QAAT,EAAV;AACA,WAAKZ,IAAL,GAAYtB,QAAQ,CAACsB,IAAT,EAAZ;AACAE,MAAAA,OAAO,CAAC,IAAD,CAAP;AACA;;;;;;AAuCF,IAAMW,QAAQ,GAAG,IAAIjC,eAAJ,EAAjB;AAEA,eAAeiC,QAAf","sourcesContent":["import firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/database';\nimport config from './firebaseServiceConfig';\n\nclass FirebaseService {\n\tinit(success) {\n\t\tif (Object.entries(config).length === 0 && config.constructor === Object) {\n\t\t\tif (process.env.NODE_ENV === 'development') {\n\t\t\t\tconsole.warn(\n\t\t\t\t\t'Missing Firebase Configuration at src/app/services/firebaseService/firebaseServiceConfig.js'\n\t\t\t\t);\n\t\t\t}\n\t\t\tsuccess(false);\n\t\t\treturn;\n\t\t}\n\n\t\tif (firebase.apps.length) {\n\t\t\treturn;\n\t\t}\n\t\tfirebase.initializeApp(config);\n\t\tthis.db = firebase.database();\n\t\tthis.auth = firebase.auth();\n\t\tsuccess(true);\n\t}\n\n\tgetUserData = userId => {\n\t\tif (!firebase.apps.length) {\n\t\t\treturn false;\n\t\t}\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.db\n\t\t\t\t.ref(`users/${userId}`)\n\t\t\t\t.once('value')\n\t\t\t\t.then(snapshot => {\n\t\t\t\t\tconst user = snapshot.val();\n\t\t\t\t\tresolve(user);\n\t\t\t\t});\n\t\t});\n\t};\n\n\tupdateUserData = user => {\n\t\tif (!firebase.apps.length) {\n\t\t\treturn false;\n\t\t}\n\t\treturn this.db.ref(`users/${user.uid}`).set(user);\n\t};\n\n\tonAuthStateChanged = callback => {\n\t\tif (!this.auth) {\n\t\t\treturn;\n\t\t}\n\t\tthis.auth.onAuthStateChanged(callback);\n\t};\n\n\tsignOut = () => {\n\t\tif (!this.auth) {\n\t\t\treturn;\n\t\t}\n\t\tthis.auth.signOut();\n\t};\n}\n\nconst instance = new FirebaseService();\n\nexport default instance;\n"]},"metadata":{},"sourceType":"module"}