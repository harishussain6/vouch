{"ast":null,"code":"import _slicedToArray from \"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"D:\\\\Projects\\\\live\\\\src\\\\app\\\\main\\\\common\\\\VendorSearch.js\";\nimport React, { useState, useEffect } from 'react';\nimport JwtService from 'app/services/jwtService';\nimport FuseChipSelect from '@fuse/core/FuseChipSelect';\nimport _ from '@lodash';\nvar axios = JwtService.getAxios();\n\nfunction VendorSearch(_ref) {\n  var setValue = _ref.setValue,\n      error = _ref.error,\n      selectedVendor = _ref.selectedVendor,\n      _ref$label = _ref.label,\n      label = _ref$label === void 0 ? 'Vendor' : _ref$label,\n      _ref$setVendor = _ref.setVendor,\n      setVendor = _ref$setVendor === void 0 ? null : _ref$setVendor,\n      _ref$selectedId = _ref.selectedId,\n      selectedId = _ref$selectedId === void 0 ? 0 : _ref$selectedId;\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      vendor = _useState2[0],\n      setVendorId = _useState2[1];\n\n  useEffect(function () {\n    if (vendor) {\n      setValue(vendor.id);\n      if (setVendor) setVendor(vendor);\n    } // eslint-disable-next-line\n\n  }, [vendor]);\n  useEffect(function () {\n    if (typeof selectedId === 'number' && selectedId > 0) {\n      axios.get('/api/admin/get-parent-list', {\n        params: {\n          query: selectedId\n        }\n      }).then(function (res) {\n        var data = res.data;\n        var compiledData = data.data.map(function (vendor) {\n          return {\n            id: vendor.id,\n            label: \"\".concat(vendor.name, \", \").concat(vendor.locality, \", \").concat(vendor.city.name.toUpperCase(), \" \")\n          };\n        });\n\n        if (compiledData && Object.keys(compiledData).length > 0) {\n          var vendorToSet = _.values(compiledData)[0];\n\n          if (setVendor) setVendor(vendorToSet);\n          setValue(vendorToSet.id);\n          setVendorId({\n            id: vendorToSet.id,\n            label: vendorToSet.label\n          });\n        }\n      });\n    }\n  }, []);\n\n  function _onChange(value, name) {\n    if (name === 'vendor') {\n      setVendorId(value);\n    }\n  }\n\n  function promiseOptions(inputValue) {\n    if (inputValue.length < 4) return Promise.resolve([]);\n    return axios.get('/api/admin/get-parent-list', {\n      params: {\n        query: inputValue\n      }\n    }).then(function (res) {\n      var data = res.data;\n      return data.data.map(function (vendor) {\n        return {\n          id: vendor.id,\n          label: \"\".concat(vendor.name, \", \").concat(vendor.locality, \", \").concat(vendor.city.name.toUpperCase(), \" \")\n        };\n      });\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(FuseChipSelect, {\n    className: \"mt-8 mb-8\",\n    value: {\n      value: vendor.id,\n      label: vendor.label\n    },\n    onChange: function onChange(value) {\n      return _onChange(value, 'vendor');\n    },\n    textFieldProps: {\n      label: label,\n      InputLabelProps: {\n        shrink: true\n      },\n      variant: 'outlined'\n    },\n    required: true,\n    variant: \"async\",\n    defaultOptions: true,\n    loadOptions: promiseOptions,\n    error: error,\n    helperText: error // defaultInputValue=\"defaultInputValue\"\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 3\n    }\n  });\n}\n\nexport default VendorSearch;","map":{"version":3,"sources":["D:/Projects/live/src/app/main/common/VendorSearch.js"],"names":["React","useState","useEffect","JwtService","FuseChipSelect","_","axios","getAxios","VendorSearch","setValue","error","selectedVendor","label","setVendor","selectedId","vendor","setVendorId","id","get","params","query","then","res","data","compiledData","map","name","locality","city","toUpperCase","Object","keys","length","vendorToSet","values","onChange","value","promiseOptions","inputValue","Promise","resolve","InputLabelProps","shrink","variant"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport JwtService from 'app/services/jwtService';\nimport FuseChipSelect from '@fuse/core/FuseChipSelect';\nimport _ from '@lodash';\n\nconst axios = JwtService.getAxios();\n\nfunction VendorSearch({ setValue, error, selectedVendor, label = 'Vendor', setVendor = null, selectedId = 0 }) {\n\tconst [vendor, setVendorId] = useState({});\n\tuseEffect(() => {\n\t\tif (vendor) {\n\t\t\tsetValue(vendor.id);\n\t\t\tif (setVendor) setVendor(vendor);\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [vendor]);\n\tuseEffect(() => {\n\t\tif (typeof selectedId === 'number' && selectedId > 0) {\n\t\t\taxios\n\t\t\t\t.get('/api/admin/get-parent-list', {\n\t\t\t\t\tparams: { query: selectedId }\n\t\t\t\t})\n\t\t\t\t.then(res => {\n\t\t\t\t\tconst data = res.data;\n\t\t\t\t\tconst compiledData = data.data.map(vendor => ({\n\t\t\t\t\t\tid: vendor.id,\n\t\t\t\t\t\tlabel: `${vendor.name}, ${vendor.locality}, ${vendor.city.name.toUpperCase()} `\n\t\t\t\t\t}));\n\t\t\t\t\tif (compiledData && Object.keys(compiledData).length > 0) {\n\t\t\t\t\t\tconst vendorToSet = _.values(compiledData)[0];\n\t\t\t\t\t\tif (setVendor)\n\t\t\t\t\t\t\tsetVendor(vendorToSet);\n\t\t\t\t\t\tsetValue(vendorToSet.id);\n\t\t\t\t\t\tsetVendorId({\n\t\t\t\t\t\t\tid: vendorToSet.id,\n\t\t\t\t\t\t\tlabel: vendorToSet.label\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t}, []);\n\tfunction onChange(value, name) {\n\t\tif (name === 'vendor') {\n\t\t\tsetVendorId(value);\n\t\t}\n\t}\n\n\tfunction promiseOptions(inputValue) {\n\t\tif (inputValue.length < 4) return Promise.resolve([]);\n\t\treturn axios\n\t\t\t.get('/api/admin/get-parent-list', {\n\t\t\t\tparams: { query: inputValue }\n\t\t\t})\n\t\t\t.then(res => {\n\t\t\t\tconst data = res.data;\n\t\t\t\treturn data.data.map(vendor => ({\n\t\t\t\t\tid: vendor.id,\n\t\t\t\t\tlabel: `${vendor.name}, ${vendor.locality}, ${vendor.city.name.toUpperCase()} `\n\t\t\t\t}));\n\t\t\t});\n\t}\n\treturn (\n\t\t<FuseChipSelect\n\t\t\tclassName=\"mt-8 mb-8\"\n\t\t\tvalue={{\n\t\t\t\tvalue: vendor.id,\n\t\t\t\tlabel: vendor.label\n\t\t\t}}\n\t\t\tonChange={value => onChange(value, 'vendor')}\n\t\t\ttextFieldProps={{\n\t\t\t\tlabel,\n\t\t\t\tInputLabelProps: {\n\t\t\t\t\tshrink: true\n\t\t\t\t},\n\t\t\t\tvariant: 'outlined'\n\t\t\t}}\n\t\t\trequired\n\t\t\tvariant=\"async\"\n\t\t\tdefaultOptions\n\t\t\tloadOptions={promiseOptions}\n\t\t\terror={error}\n\t\t\thelperText={error}\n\t\t\t// defaultInputValue=\"defaultInputValue\"\n\t\t/>\n\t);\n}\n\nexport default VendorSearch;\n"]},"metadata":{},"sourceType":"module"}