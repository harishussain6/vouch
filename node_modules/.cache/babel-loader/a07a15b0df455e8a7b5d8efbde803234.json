{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"D:\\\\Projects\\\\live\\\\src\\\\app\\\\main\\\\transaction\\\\Transactions.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Grid, Typography, Paper, TextField, Button } from '@material-ui/core';\nimport FusePageSimple from '@fuse/core/FusePageSimple';\nimport MaterialTable from 'material-table';\nimport JwtService from 'app/services/jwtService';\nimport { connect } from 'react-redux';\nimport Add from './Add';\nimport moment from 'moment-timezone';\n\nfunction Transaction(_ref) {\n  var user = _ref.user;\n\n  var _useState = useState(currentDate()),\n      _useState2 = _slicedToArray(_useState, 2),\n      toDate = _useState2[0],\n      setToDate = _useState2[1];\n\n  var _useState3 = useState(currentDate()),\n      _useState4 = _slicedToArray(_useState3, 2),\n      fromDate = _useState4[0],\n      setFromDate = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      transactions = _useState6[0],\n      setTransactions = _useState6[1];\n\n  var _useState7 = useState(true),\n      _useState8 = _slicedToArray(_useState7, 2),\n      loading = _useState8[0],\n      setLoading = _useState8[1];\n\n  var _useState9 = useState(true),\n      _useState10 = _slicedToArray(_useState9, 2),\n      disabled = _useState10[0],\n      setDisabled = _useState10[1];\n\n  function currentDate() {\n    var today = new Date();\n    var dd = String(today.getDate()).padStart(2, '0');\n    var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!\n\n    var yyyy = today.getFullYear();\n    return yyyy + '-' + mm + '-' + dd;\n  }\n\n  useEffect(function () {\n    // eslint-disable-next-line\n    if (loading) setDisabled(false);\n  }, [loading]);\n  useEffect(function () {\n    if (toDate && fromDate) data(); // eslint-disable-next-line\n  }, []);\n\n  function onChange(event) {\n    var target = event.target;\n\n    if (target.name === 'toDate') {\n      setToDate(target.value);\n    } else {\n      setFromDate(target.value);\n    }\n  }\n\n  function data() {\n    return _data.apply(this, arguments);\n  }\n\n  function _data() {\n    _data = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var axios, params, transactions, resp;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setLoading(true);\n              axios = JwtService.getAxios();\n              params = {\n                date_from: fromDate,\n                date_to: toDate\n              };\n              _context.next = 5;\n              return axios.get('/api/transaction', {\n                params: params\n              });\n\n            case 5:\n              transactions = _context.sent;\n              resp = transactions.data;\n              setLoading(false);\n              return _context.abrupt(\"return\", setTransactions(resp.data));\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _data.apply(this, arguments);\n  }\n\n  function Action(props) {\n    switch (props.action.icon) {\n      case 'save':\n        return user.data.role === 'marketing' ? /*#__PURE__*/React.createElement(React.Fragment, null) : /*#__PURE__*/React.createElement(Add, {\n          reload: data,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 53\n          }\n        });\n\n      default:\n        return /*#__PURE__*/React.createElement(React.Fragment, null);\n    }\n  }\n\n  function getColumns() {\n    var column = [{\n      title: 'ID',\n      field: 'id'\n    }, {\n      title: 'User Name',\n      field: 'user_name'\n    }];\n    return [].concat(column, [{\n      title: 'email',\n      field: 'user_email'\n    }, {\n      title: 'Phone',\n      field: 'user_phone'\n    }, {\n      title: 'Product',\n      field: 'product_title'\n    }, {\n      title: 'City',\n      field: 'product_city'\n    }, {\n      title: 'Amount',\n      field: 'product_amount'\n    }, {\n      title: 'Transaction ID',\n      field: 'transaction_id'\n    }, {\n      title: 'Order ID',\n      field: 'order_id'\n    }, {\n      title: 'Provider',\n      field: 'provider'\n    }, {\n      title: 'Time',\n      field: 'created_at',\n      render: function render(rowData) {\n        var date = moment(rowData.created_at).tz('Asia/Karachi');\n        return date.format('MMMM Do YYYY (h:mm a)');\n      }\n    }]);\n  }\n\n  return /*#__PURE__*/React.createElement(FusePageSimple, {\n    header: /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      item: true,\n      justify: \"flex-end\",\n      direction: \"column\",\n      className: \"pl-12 pb-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 6\n      }\n    }, \"Transactions\")),\n    content: /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      className: \"p-20\",\n      justify: \"space-between\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      md: 12,\n      className: \"mt-8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(Paper, {\n      elevation: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      spacing: 4,\n      alignItems: \"center\",\n      className: \"ml-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      md: 3,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      id: \"from\",\n      name: \"fromDate\",\n      label: \"From\",\n      type: \"date\",\n      InputLabelProps: {\n        shrink: true\n      },\n      fullWidth: true,\n      variant: \"outlined\",\n      onChange: onChange,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 10\n      }\n    })), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      md: 3,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      id: \"to\",\n      name: \"toDate\",\n      label: \"To\",\n      type: \"date\",\n      InputLabelProps: {\n        shrink: true\n      },\n      fullWidth: true,\n      variant: \"outlined\",\n      onChange: onChange,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 10\n      }\n    })), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      disabled: disabled,\n      className: \"mt-6\",\n      onClick: data,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 10\n      }\n    }, \"Search\"))))), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      className: \"mt-28\",\n      md: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(MaterialTable, {\n      title: \"Transactions\",\n      data: transactions,\n      isLoading: loading,\n      columns: getColumns(),\n      actions: [{\n        icon: 'save',\n        isFreeAction: true,\n        onClick: function onClick() {}\n      }],\n      options: {\n        pageSize: 10,\n        pageSizeOptions: [10, 20, 50],\n        actionsColumnIndex: -1,\n        exportButton: true,\n        exportAllData: true\n      } // components={{\n      // \tAction\n      // }}\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 7\n      }\n    }))),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 3\n    }\n  });\n}\n\nfunction mapStateToProps(_ref2) {\n  var auth = _ref2.auth;\n  return {\n    user: auth.user\n  };\n}\n\nexport default connect(mapStateToProps)(Transaction);","map":{"version":3,"sources":["D:/Projects/live/src/app/main/transaction/Transactions.js"],"names":["React","useState","useEffect","Grid","Typography","Paper","TextField","Button","FusePageSimple","MaterialTable","JwtService","connect","Add","moment","Transaction","user","currentDate","toDate","setToDate","fromDate","setFromDate","transactions","setTransactions","loading","setLoading","disabled","setDisabled","today","Date","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","data","onChange","event","target","name","value","axios","getAxios","params","date_from","date_to","get","resp","Action","props","action","icon","role","getColumns","column","title","field","render","rowData","date","created_at","tz","format","shrink","isFreeAction","onClick","pageSize","pageSizeOptions","actionsColumnIndex","exportButton","exportAllData","mapStateToProps","auth"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Grid, Typography, Paper, TextField, Button } from '@material-ui/core';\nimport FusePageSimple from '@fuse/core/FusePageSimple';\nimport MaterialTable from 'material-table';\nimport JwtService from 'app/services/jwtService';\nimport { connect } from 'react-redux';\nimport Add from './Add';\nimport moment from 'moment-timezone';\n\nfunction Transaction({ user }) {\n\tconst [toDate, setToDate] = useState(currentDate());\n\tconst [fromDate, setFromDate] = useState(currentDate());\n\tconst [transactions, setTransactions] = useState([]);\n\tconst [loading, setLoading] = useState(true);\n\tconst [disabled, setDisabled] = useState(true);\n\n\tfunction currentDate() {\n\t\tvar today = new Date();\n\t\tvar dd = String(today.getDate()).padStart(2, '0');\n\t\tvar mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!\n\t\tvar yyyy = today.getFullYear();\n\n\t\treturn yyyy + '-' + mm + '-' + dd;\n\t}\n\n\tuseEffect(() => {\n\t\t// eslint-disable-next-line\n\t\tif (loading) setDisabled(false);\n\t}, [loading]);\n\tuseEffect(() => {\n\t\tif (toDate && fromDate) data();\n\t\t// eslint-disable-next-line\n\t}, []);\n\n\tfunction onChange(event) {\n\t\tconst target = event.target;\n\t\tif (target.name === 'toDate') {\n\t\t\tsetToDate(target.value);\n\t\t} else {\n\t\t\tsetFromDate(target.value);\n\t\t}\n\t}\n\n\tasync function data() {\n\t\tsetLoading(true);\n\t\tconst axios = JwtService.getAxios();\n\n\t\tconst params = {\n\t\t\tdate_from: fromDate,\n\t\t\tdate_to: toDate\n\t\t};\n\n\t\tconst transactions = await axios.get('/api/transaction', {\n\t\t\tparams\n\t\t});\n\t\tconst resp = transactions.data;\n\t\tsetLoading(false);\n\t\treturn setTransactions(resp.data);\n\t}\n\n\tfunction Action(props) {\n\t\tswitch (props.action.icon) {\n\t\t\tcase 'save':\n\t\t\t\treturn user.data.role === 'marketing' ? <></> : <Add reload={data} />;\n\t\t\tdefault:\n\t\t\t\treturn <></>;\n\t\t}\n\t}\n\n\tfunction getColumns() {\n\t\tconst column = [\n\t\t\t{\n\t\t\t\ttitle: 'ID',\n\t\t\t\tfield: 'id'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'User Name',\n\t\t\t\tfield: 'user_name'\n\t\t\t}\n\t\t];\n\n\t\treturn [\n\t\t\t...column,\n\t\t\t{\n\t\t\t\ttitle: 'email',\n\t\t\t\tfield: 'user_email'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Phone',\n\t\t\t\tfield: 'user_phone'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Product',\n\t\t\t\tfield: 'product_title'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'City',\n\t\t\t\tfield: 'product_city'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Amount',\n\t\t\t\tfield: 'product_amount'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Transaction ID',\n\t\t\t\tfield: 'transaction_id'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Order ID',\n\t\t\t\tfield: 'order_id'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Provider',\n\t\t\t\tfield: 'provider'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Time',\n\t\t\t\tfield: 'created_at',\n\t\t\t\trender: rowData => {\n\t\t\t\t\tconst date = moment(rowData.created_at).tz('Asia/Karachi');\n\t\t\t\t\treturn date.format('MMMM Do YYYY (h:mm a)');\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\t}\n\n\treturn (\n\t\t<FusePageSimple\n\t\t\theader={\n\t\t\t\t<Grid container item justify=\"flex-end\" direction=\"column\" className=\"pl-12 pb-12\">\n\t\t\t\t\t<Typography variant=\"h4\">Transactions</Typography>\n\t\t\t\t</Grid>\n\t\t\t}\n\t\t\tcontent={\n\t\t\t\t<Grid container className=\"p-20\" justify=\"space-between\">\n\t\t\t\t\t<Grid item md={12} className=\"mt-8\">\n\t\t\t\t\t\t<Paper elevation={4}>\n\t\t\t\t\t\t\t<Grid container spacing={4} alignItems=\"center\" className=\"ml-4\">\n\t\t\t\t\t\t\t\t<Grid item md={3}>\n\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\tid=\"from\"\n\t\t\t\t\t\t\t\t\t\tname=\"fromDate\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"From\"\n\t\t\t\t\t\t\t\t\t\ttype=\"date\"\n\t\t\t\t\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\t\t\t\t\tshrink: true\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t<Grid item md={3}>\n\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\tid=\"to\"\n\t\t\t\t\t\t\t\t\t\tname=\"toDate\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"To\"\n\t\t\t\t\t\t\t\t\t\ttype=\"date\"\n\t\t\t\t\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\t\t\t\t\tshrink: true\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\t\t\t\t\tclassName=\"mt-6\"\n\t\t\t\t\t\t\t\t\t\tonClick={data}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tSearch\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</Paper>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item className=\"mt-28\" md={12}>\n\t\t\t\t\t\t<MaterialTable\n\t\t\t\t\t\t\ttitle=\"Transactions\"\n\t\t\t\t\t\t\tdata={transactions}\n\t\t\t\t\t\t\tisLoading={loading}\n\t\t\t\t\t\t\tcolumns={getColumns()}\n\t\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ticon: 'save',\n\t\t\t\t\t\t\t\t\tisFreeAction: true,\n\t\t\t\t\t\t\t\t\tonClick: () => {}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\toptions={{\n\t\t\t\t\t\t\t\tpageSize: 10,\n\t\t\t\t\t\t\t\tpageSizeOptions: [10, 20, 50],\n\t\t\t\t\t\t\t\tactionsColumnIndex: -1,\n\t\t\t\t\t\t\t\texportButton: true,\n\t\t\t\t\t\t\t\texportAllData: true\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t// components={{\n\t\t\t\t\t\t\t// \tAction\n\t\t\t\t\t\t\t// }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t}\n\t\t/>\n\t);\n}\n\nfunction mapStateToProps({ auth }) {\n\treturn {\n\t\tuser: auth.user\n\t};\n}\n\nexport default connect(mapStateToProps)(Transaction);\n"]},"metadata":{},"sourceType":"module"}