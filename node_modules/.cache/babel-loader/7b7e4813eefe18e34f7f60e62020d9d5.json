{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"D:\\\\Projects\\\\live\\\\src\\\\app\\\\main\\\\vendor\\\\voucher\\\\Vouchers.js\";\nimport React from 'react';\nimport MaterialTable from 'material-table';\nimport JwtService from 'app/services/jwtService';\nimport Add from './Add';\nimport Edit from './Edit';\nimport StatusButton from './StatusButton';\n\nfunction Vouchers(_ref) {\n  var vendor_id = _ref.vendor_id;\n  var tableRef = React.createRef();\n\n  function getData(_x) {\n    return _getData.apply(this, arguments);\n  }\n\n  function _getData() {\n    _getData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(query) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              return _context2.abrupt(\"return\", new Promise( /*#__PURE__*/function () {\n                var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(resolve) {\n                  var axios, params, vouchers, resp;\n                  return _regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          JwtService.init();\n                          axios = JwtService.getAxios();\n                          params = {\n                            page: query.page,\n                            limit: query.pageSize,\n                            q: query.search,\n                            vendor_id: vendor_id\n                          };\n                          _context.next = 5;\n                          return axios.get('/api/admin/voucher', {\n                            params: params\n                          });\n\n                        case 5:\n                          vouchers = _context.sent;\n                          resp = vouchers.data;\n\n                          if (resp.status) {\n                            resolve({\n                              data: resp.data.data,\n                              /// your data array\n                              page: query.page,\n                              // current page number\n                              totalCount: resp.data.total // total row number\n\n                            });\n                          } else {\n                            resolve({\n                              data: [],\n                              /// your data array\n                              page: 0,\n                              // current page number\n                              totalCount: 0 // total row number\n\n                            });\n                          }\n\n                        case 8:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee);\n                }));\n\n                return function (_x2) {\n                  return _ref3.apply(this, arguments);\n                };\n              }()));\n\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _getData.apply(this, arguments);\n  }\n\n  function reload() {\n    console.log(tableRef.current);\n    return tableRef.current && tableRef.current.onQueryChange();\n  }\n\n  function Action(_ref2) {\n    var action = _ref2.action,\n        data = _ref2.data;\n\n    switch (action.icon) {\n      case 'save':\n        return /*#__PURE__*/React.createElement(Add, {\n          reload: reload,\n          vendor_id: vendor_id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 12\n          }\n        });\n\n      case 'edit':\n        return /*#__PURE__*/React.createElement(Edit, {\n          reload: reload,\n          voucher_id: data.id ? data.id : null,\n          vendor_id: vendor_id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 12\n          }\n        });\n\n      case 'status':\n        return /*#__PURE__*/React.createElement(StatusButton, {\n          data: data,\n          reload: reload,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 12\n          }\n        });\n\n      default:\n        return \"\";\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(MaterialTable, {\n    title: \"Vouchers\",\n    data: getData,\n    tableRef: tableRef,\n    columns: [{\n      title: 'Name',\n      field: 'name'\n    }, {\n      title: 'Status',\n      field: 'status'\n    }, {\n      title: 'Activation Date',\n      field: 'act_date'\n    }, {\n      title: 'Expiration Date',\n      field: 'exp_date'\n    }, {\n      title: 'Savings',\n      field: 'savings'\n    }],\n    actions: [{\n      icon: 'save',\n      isFreeAction: true,\n      onClick: function onClick() {}\n    }, {\n      icon: 'status',\n      onClick: function onClick() {}\n    }, {\n      icon: 'edit',\n      onClick: function onClick() {}\n    }],\n    options: {\n      pageSize: 10,\n      pageSizeOptions: [10, 20, 50],\n      actionsColumnIndex: -1\n    },\n    components: {\n      Action: Action\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 3\n    }\n  });\n}\n\nexport default Vouchers;","map":{"version":3,"sources":["D:/Projects/live/src/app/main/vendor/voucher/Vouchers.js"],"names":["React","MaterialTable","JwtService","Add","Edit","StatusButton","Vouchers","vendor_id","tableRef","createRef","getData","query","Promise","resolve","init","axios","getAxios","params","page","limit","pageSize","q","search","get","vouchers","resp","data","status","totalCount","total","reload","console","log","current","onQueryChange","Action","action","icon","id","title","field","isFreeAction","onClick","pageSizeOptions","actionsColumnIndex"],"mappings":"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","sourcesContent":["import React from 'react';\nimport MaterialTable from 'material-table';\nimport JwtService from 'app/services/jwtService';\nimport Add from './Add';\nimport Edit from './Edit';\nimport StatusButton from './StatusButton';\n\nfunction Vouchers({ vendor_id }) {\n\tconst tableRef = React.createRef();\n\tasync function getData(query) {\n\t\treturn new Promise(async resolve => {\n\t\t\tJwtService.init();\n\t\t\tconst axios = JwtService.getAxios();\n\t\t\tconst params = {\n\t\t\t\tpage: query.page,\n\t\t\t\tlimit: query.pageSize,\n\t\t\t\tq: query.search,\n\t\t\t\tvendor_id\n\t\t\t};\n\n\t\t\tconst vouchers = await axios.get('/api/admin/voucher', { params });\n\t\t\tconst resp = vouchers.data;\n\t\t\tif (resp.status) {\n\t\t\t\tresolve({\n\t\t\t\t\tdata: resp.data.data, /// your data array\n\t\t\t\t\tpage: query.page, // current page number\n\t\t\t\t\ttotalCount: resp.data.total // total row number\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tresolve({\n\t\t\t\t\tdata: [], /// your data array\n\t\t\t\t\tpage: 0, // current page number\n\t\t\t\t\ttotalCount: 0 // total row number\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\tfunction reload() {\n\t\tconsole.log(tableRef.current);\n\t\treturn tableRef.current && tableRef.current.onQueryChange();\n\t}\n\n\t\n\tfunction Action({ action, data }) {\n\t\tswitch (action.icon) {\n\t\t\tcase 'save':\n\t\t\t\treturn <Add reload={reload} vendor_id={vendor_id} />;\n\t\t\tcase 'edit':\n\t\t\t\treturn <Edit reload={reload} voucher_id={data.id ? data.id : null} vendor_id={vendor_id} />;\n\t\t\tcase 'status':\n\t\t\t\treturn <StatusButton data={data} reload={reload}/>\t\n\t\t\tdefault:\n\t\t\t\treturn \"\";\n\t\t}\n\t}\n\n\treturn (\n\t\t<MaterialTable\n\t\t\ttitle=\"Vouchers\"\n\t\t\tdata={getData}\n\t\t\ttableRef={tableRef}\n\t\t\tcolumns={[\n\t\t\t\t{\n\t\t\t\t\ttitle: 'Name',\n\t\t\t\t\tfield: 'name'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: 'Status',\n\t\t\t\t\tfield: 'status'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: 'Activation Date',\n\t\t\t\t\tfield: 'act_date'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: 'Expiration Date',\n\t\t\t\t\tfield: 'exp_date'\n\t\t\t\t},\n\n\t\t\t\t{\n\t\t\t\t\ttitle: 'Savings',\n\t\t\t\t\tfield: 'savings'\n\t\t\t\t}\n\t\t\t]}\n\t\t\tactions={[\n\t\t\t\t{\n\t\t\t\t\ticon: 'save',\n\t\t\t\t\tisFreeAction: true,\n\t\t\t\t\tonClick: () => {}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ticon: 'status',\n\t\t\t\t\tonClick: () => {}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ticon: 'edit',\n\t\t\t\t\tonClick: () => {}\n\t\t\t\t}\n\t\t\t]}\n\t\t\toptions={{\n\t\t\t\tpageSize: 10,\n\t\t\t\tpageSizeOptions: [10, 20, 50],\n\t\t\t\tactionsColumnIndex: -1\n\t\t\t}}\n\t\t\tcomponents={{\n\t\t\t\tAction\n\t\t\t}}\n\t\t/>\n\t);\n}\n\nexport default Vouchers;\n"]},"metadata":{},"sourceType":"module"}