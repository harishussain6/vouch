{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import MaterialTable from'material-table';import JwtService from'app/services/jwtService';import{Grid,Typography,Paper,Button}from'@material-ui/core';import FusePageSimple from'@fuse/core/FusePageSimple';import FuseChipSelect from'@fuse/core/FuseChipSelect';JwtService.init();var axios=JwtService.getAxios();function Logs(){var tableRef=React.createRef();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),orders=_useState2[0],setOrders=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),search=_useState6[0],setSearch=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),users=_useState8[0],setUsers=_useState8[1];useEffect(function(){if(users.length===0){var getUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:axios.get('/api/admin/users').then(function(res){var data=res.data.data;setUsers(data);});case 1:case\"end\":return _context.stop();}}},_callee);}));return function getUser(){return _ref.apply(this,arguments);};}();getUser();}},[users]);function getData(){return _getData.apply(this,arguments);}function _getData(){_getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var vouchers,resp;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;setLoading(true);_context2.next=4;return axios.get(\"/api/admin/logs?user_id=\".concat(search.id));case 4:vouchers=_context2.sent;resp=vouchers.data;if(resp.status){setOrders(resp.data.logs);}else{setOrders([]);}setLoading(false);_context2.next=14;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);setOrders([]);setLoading(false);case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[0,10]]);}));return _getData.apply(this,arguments);}function handleChipChange(value,name){var setValue=Array.isArray(value)?value.map(function(item){return{id:item.value,name:item.label};}):{id:value.value,name:value.label};setSearch(setValue);}return/*#__PURE__*/React.createElement(FusePageSimple,{header:/*#__PURE__*/React.createElement(Grid,{container:true,item:true,justify:\"flex-end\",direction:\"column\",className:\"pl-12 pb-12\"},/*#__PURE__*/React.createElement(Typography,{variant:\"h4\"},\"Logs\")),content:/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Grid,{container:true,className:\"p-20\",justify:\"space-between\"},/*#__PURE__*/React.createElement(Grid,{item:true,md:12,className:\"mt-8\"},/*#__PURE__*/React.createElement(Paper,{elevation:4},/*#__PURE__*/React.createElement(Grid,{container:true,spacing:4,alignItems:\"center\",className:\"ml-4\"},/*#__PURE__*/React.createElement(Grid,{item:true,md:6},/*#__PURE__*/React.createElement(FuseChipSelect,{value:{value:search.id,label:search.name},onChange:function onChange(value){return handleChipChange(value,'user');},textFieldProps:{label:'User',InputLabelProps:{shrink:true},variant:'outlined'},options:users.map(function(city){return{value:city.id,label:city.name};})})),/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"primary\",disabled:!search,className:\"mt-4\",onClick:getData},\"Search\")))))),/*#__PURE__*/React.createElement(MaterialTable,{data:orders,ref:tableRef,columns:[{title:'Name',field:'user.name'},{title:'Log',field:'log'},{title:'Time',field:'created_at'}],isLoading:loading,options:{pageSize:10,pageSizeOptions:[10,20,50],actionsColumnIndex:-1,showTitle:false,overflowY:'visible',headerStyle:{zIndex:0},exportButton:true}}))});}export default Logs;","map":null,"metadata":{},"sourceType":"module"}