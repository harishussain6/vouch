{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import MaterialTable from'material-table';import JwtService from'app/services/jwtService';import Add from'./Add';import Edit from'./Edit';import{Grid,Typography,Paper,Button,LinearProgress}from'@material-ui/core';import FuseChipSelect from'@fuse/core/FuseChipSelect';import FusePageSimple from'@fuse/core/FusePageSimple';JwtService.init();var axios=JwtService.getAxios();function Slides(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),sliders=_useState2[0],setSliders=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState({value:1,label:'top'}),_useState6=_slicedToArray(_useState5,2),slider_id=_useState6[0],setSliderId=_useState6[1];var _useState7=useState({value:1,label:'vouch365'}),_useState8=_slicedToArray(_useState7,2),partner_id=_useState8[0],setPartnerId=_useState8[1];var _useState9=useState({value:1,label:'free'}),_useState10=_slicedToArray(_useState9,2),membership_id=_useState10[0],setMembershipId=_useState10[1];var _useState11=useState({value:1,label:'karachi'}),_useState12=_slicedToArray(_useState11,2),city_id=_useState12[0],setCityId=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),memberships=_useState14[0],setMemberships=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),partners=_useState16[0],setPartners=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),cities=_useState18[0],setCities=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),selectLoading=_useState20[0],setSelectLoading=_useState20[1];useEffect(function(){if(!selectLoading)getOptions();// eslint-disable-next-line\n},[]);useEffect(function(){if(partners.length>0&&memberships.length>0&&cities.length>0)setSelectLoading(false);},[partners,memberships,cities]);function getOptions(){setSelectLoading(true);axios.get('/api/admin/city').then(function(res){var data=res.data.data;setCities(data.cities);});axios.get('/api/admin/membership').then(function(res){var data=res.data.data;setMemberships(data.membership);});axios.get('/api/admin/partner').then(function(res){var data=res.data.data;setPartners(data.partners);});}function getData(){return _getData.apply(this,arguments);}function _getData(){_getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var vouchers,resp;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.next=3;return axios.get('/api/admin/slide',{params:{slider_id:slider_id.value,partner_id:partner_id.value,city_id:city_id.value,membership_id:membership_id.value}});case 3:vouchers=_context.sent;resp=vouchers.data;if(resp.status){setSliders(resp.data.slide);}else{setSliders([]);}setLoading(false);case 7:case\"end\":return _context.stop();}}},_callee);}));return _getData.apply(this,arguments);}function reload(){return getData();}function Action(_ref){var action=_ref.action,data=_ref.data;switch(action.icon){case'save':return/*#__PURE__*/React.createElement(Add,{reload:reload});case'edit':return/*#__PURE__*/React.createElement(Edit,{reload:reload,slide_id:data.id?data.id:null});default:return/*#__PURE__*/React.createElement(React.Fragment,null);}}function isDisabled(){return false;}function handleChipChange(value,name){if(name==='slider_id'){setSliderId(value);}else if(name==='partner_id'){setPartnerId(value);}else if(name==='city_id'){setCityId(value);}else if(name==='membership_id'){setMembershipId(value);}}return/*#__PURE__*/React.createElement(FusePageSimple,{header:/*#__PURE__*/React.createElement(Grid,{container:true,item:true,justify:\"flex-end\",direction:\"column\",className:\"pl-12 pb-12\"},/*#__PURE__*/React.createElement(Typography,{variant:\"h4\"},\"Slides\")),content:/*#__PURE__*/React.createElement(Grid,{container:true,className:\"p-20\",justify:\"space-between\"},/*#__PURE__*/React.createElement(Grid,{item:true,md:12,className:\"mt-8\"},/*#__PURE__*/React.createElement(Paper,{elevation:4},selectLoading?/*#__PURE__*/React.createElement(LinearProgress,null):/*#__PURE__*/React.createElement(Grid,{container:true,spacing:4,alignItems:\"center\",className:\"ml-4\"},/*#__PURE__*/React.createElement(Grid,{item:true,md:2},/*#__PURE__*/React.createElement(FuseChipSelect,{className:\"mt-8 mb-8\",value:membership_id,onChange:function onChange(value){return handleChipChange(value,'membership_id');},placeholder:\"Select membership\",textFieldProps:{label:'Memberships',InputLabelProps:{shrink:true},variant:'outlined'},options:memberships.map(function(membership){return{value:membership.id,label:membership.name};}),required:true})),/*#__PURE__*/React.createElement(Grid,{item:true,md:2},/*#__PURE__*/React.createElement(FuseChipSelect,{className:\"mt-8 mb-8\",value:partner_id,onChange:function onChange(value){return handleChipChange(value,'partner_id');},placeholder:\"Select multiple partners\",textFieldProps:{label:'Partners',InputLabelProps:{shrink:true},variant:'outlined'},options:partners.map(function(partner){return{value:partner.id,label:partner.name};}),required:true})),/*#__PURE__*/React.createElement(Grid,{item:true,md:2},/*#__PURE__*/React.createElement(FuseChipSelect,{className:\"mt-8 mb-8\",value:city_id,onChange:function onChange(value){return handleChipChange(value,'city_id');},textFieldProps:{label:'City',InputLabelProps:{shrink:true},variant:'outlined'},options:cities.map(function(city){return{value:city.id,label:city.name};}),required:true})),/*#__PURE__*/React.createElement(Grid,{item:true,md:2},/*#__PURE__*/React.createElement(FuseChipSelect,{className:\"mt-8 mb-8\",value:slider_id,onChange:function onChange(value){return handleChipChange(value,'slider_id');},textFieldProps:{label:'Slider Type',InputLabelProps:{shrink:true},variant:'outlined'},options:[{value:1,label:'Home Top'},{value:2,label:'Home Bottom'},{value:3,label:'Home Featured'},{value:4,label:'Category Top'},{value:5,label:'Category Bottom'},{value:6,label:'Category Featured'}],required:true})),/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(Button,{variant:\"contained\",className:\"mb-23\",color:\"primary\",disabled:isDisabled(),onClick:getData},\"Search\"))))),/*#__PURE__*/React.createElement(Grid,{item:true,md:12,className:\"mt-28\"},/*#__PURE__*/React.createElement(MaterialTable,{data:sliders,columns:[{title:'Tag',field:'tag'},{title:'Status',field:'status'},{title:'Link Type',field:'linktype'},{title:'Header',field:'header',// render: rowData => <img src={rowData.url} style={{width: 50, borderRadius: '50%'}}/>,\nrender:function render(rowData){return/*#__PURE__*/React.createElement(\"a\",{href:rowData.header,target:\"_blank\",rel:\"noopener noreferrer\"},/*#__PURE__*/React.createElement(\"img\",{src:rowData.header,alt:rowData.tag,style:{width:150}}));}},{title:'Live Date',field:'dtlive'}],isLoading:loading,actions:[{icon:'save',isFreeAction:true,onClick:function onClick(){}},{icon:'edit',onClick:function onClick(){}}],options:{pageSize:10,pageSizeOptions:[10,20,50],actionsColumnIndex:-1,showTitle:false,overflowY:'visible',headerStyle:{zIndex:0}},components:{Action:Action}})))});}export default Slides;","map":null,"metadata":{},"sourceType":"module"}