{"ast":null,"code":"import firebaseService from 'app/services/firebaseService';\nimport jwtService from 'app/services/jwtService';\nimport * as Actions from 'app/store/actions';\nimport * as UserActions from './user.actions';\nexport var LOGIN_ERROR = 'LOGIN_ERROR';\nexport var LOGIN_SUCCESS = 'LOGIN_SUCCESS';\nexport function loginWithToken() {\n  return function (dispatch) {\n    return jwtService.signInWithToken.then(function (user) {\n      console.log(user);\n      dispatch(UserActions.setJWTUserData(user));\n      return dispatch({\n        type: LOGIN_SUCCESS\n      });\n    }).catch(function (error) {\n      console.log(error);\n      return dispatch({\n        type: LOGIN_ERROR,\n        payload: error\n      });\n    });\n  };\n}\nexport function submitLogin(_ref) {\n  var email = _ref.email,\n      password = _ref.password;\n  return function (dispatch) {\n    return jwtService.signInWithEmailAndPassword(email, password).then(function (user) {\n      dispatch(UserActions.setJWTUserData(user));\n      return dispatch({\n        type: LOGIN_SUCCESS\n      });\n    }).catch(function (error) {\n      console.log(error);\n      return dispatch({\n        type: LOGIN_ERROR,\n        payload: error\n      });\n    });\n  };\n}\nexport function submitLoginWithFireBase(_ref2) {\n  var username = _ref2.username,\n      password = _ref2.password;\n\n  if (!firebaseService.auth) {\n    console.warn(\"Firebase Service didn't initialize, check your configuration\");\n    return function () {\n      return false;\n    };\n  }\n\n  return function (dispatch) {\n    return firebaseService.auth.signInWithEmailAndPassword(username, password).then(function () {\n      return dispatch({\n        type: LOGIN_SUCCESS\n      });\n    }).catch(function (error) {\n      console.info('error');\n      var usernameErrorCodes = ['auth/email-already-in-use', 'auth/invalid-email', 'auth/operation-not-allowed', 'auth/user-not-found', 'auth/user-disabled'];\n      var passwordErrorCodes = ['auth/weak-password', 'auth/wrong-password'];\n      var response = {\n        username: usernameErrorCodes.includes(error.code) ? error.message : null,\n        password: passwordErrorCodes.includes(error.code) ? error.message : null\n      };\n\n      if (error.code === 'auth/invalid-api-key') {\n        dispatch(Actions.showMessage({\n          message: error.message\n        }));\n      }\n\n      return dispatch({\n        type: LOGIN_ERROR,\n        payload: response\n      });\n    });\n  };\n}","map":{"version":3,"sources":["D:/Projects/live/src/app/auth/store/actions/login.actions.js"],"names":["firebaseService","jwtService","Actions","UserActions","LOGIN_ERROR","LOGIN_SUCCESS","loginWithToken","dispatch","signInWithToken","then","user","console","log","setJWTUserData","type","catch","error","payload","submitLogin","email","password","signInWithEmailAndPassword","submitLoginWithFireBase","username","auth","warn","info","usernameErrorCodes","passwordErrorCodes","response","includes","code","message","showMessage"],"mappings":"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","sourcesContent":["import firebaseService from 'app/services/firebaseService';\nimport jwtService from 'app/services/jwtService';\nimport * as Actions from 'app/store/actions';\nimport * as UserActions from './user.actions';\n\nexport const LOGIN_ERROR = 'LOGIN_ERROR';\nexport const LOGIN_SUCCESS = 'LOGIN_SUCCESS';\n\nexport function loginWithToken() {\n\treturn dispatch =>\n\t\tjwtService.signInWithToken\n\t\t\t.then(user => {\n\t\t\t\tconsole.log(user);\n\t\t\t\tdispatch(UserActions.setJWTUserData(user));\n\n\t\t\t\treturn dispatch({\n\t\t\t\t\ttype: LOGIN_SUCCESS\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tconsole.log(error);\n\t\t\t\treturn dispatch({\n\t\t\t\t\ttype: LOGIN_ERROR,\n\t\t\t\t\tpayload: error\n\t\t\t\t});\n\t\t\t});\n}\nexport function submitLogin({ email, password }) {\n\treturn dispatch =>\n\t\tjwtService\n\t\t\t.signInWithEmailAndPassword(email, password)\n\t\t\t.then(user => {\n\t\t\t\tdispatch(UserActions.setJWTUserData(user));\n\t\t\t\treturn dispatch({\n\t\t\t\t\ttype: LOGIN_SUCCESS\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tconsole.log(error);\n\t\t\t\treturn dispatch({\n\t\t\t\t\ttype: LOGIN_ERROR,\n\t\t\t\t\tpayload: error\n\t\t\t\t});\n\t\t\t});\n}\n\nexport function submitLoginWithFireBase({ username, password }) {\n\tif (!firebaseService.auth) {\n\t\tconsole.warn(\"Firebase Service didn't initialize, check your configuration\");\n\n\t\treturn () => false;\n\t}\n\n\treturn dispatch =>\n\t\tfirebaseService.auth\n\t\t\t.signInWithEmailAndPassword(username, password)\n\t\t\t.then(() => {\n\t\t\t\treturn dispatch({\n\t\t\t\t\ttype: LOGIN_SUCCESS\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tconsole.info('error');\n\t\t\t\tconst usernameErrorCodes = [\n\t\t\t\t\t'auth/email-already-in-use',\n\t\t\t\t\t'auth/invalid-email',\n\t\t\t\t\t'auth/operation-not-allowed',\n\t\t\t\t\t'auth/user-not-found',\n\t\t\t\t\t'auth/user-disabled'\n\t\t\t\t];\n\t\t\t\tconst passwordErrorCodes = ['auth/weak-password', 'auth/wrong-password'];\n\n\t\t\t\tconst response = {\n\t\t\t\t\tusername: usernameErrorCodes.includes(error.code) ? error.message : null,\n\t\t\t\t\tpassword: passwordErrorCodes.includes(error.code) ? error.message : null\n\t\t\t\t};\n\n\t\t\t\tif (error.code === 'auth/invalid-api-key') {\n\t\t\t\t\tdispatch(Actions.showMessage({ message: error.message }));\n\t\t\t\t}\n\n\t\t\t\treturn dispatch({\n\t\t\t\t\ttype: LOGIN_ERROR,\n\t\t\t\t\tpayload: response\n\t\t\t\t});\n\t\t\t});\n}\n"]},"metadata":{},"sourceType":"module"}