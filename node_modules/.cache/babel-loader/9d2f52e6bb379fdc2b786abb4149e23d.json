{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from'react';import{withStyles,Dialog,DialogTitle,DialogContent,TextField,DialogActions,Button,Grid,LinearProgress,FormHelperText}from'@material-ui/core';import JwtService from'app/services/jwtService';import{UserContext}from'app/context/UserContext';var styles=function styles(){return{};};function RedemptionDialog(_ref){var handleClick=_ref.handleClick,handleClose=_ref.handleClose,open=_ref.open,title=_ref.title,loading=_ref.loading,error=_ref.error,errorMessage=_ref.errorMessage;var userContext=useContext(UserContext);var _useState=useState(1),_useState2=_slicedToArray(_useState,2),voucher=_useState2[0],setVoucher=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),premium_key=_useState4[0],setPremiumKey=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),vouchers=_useState6[0],setVouchers=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),selectLoading=_useState8[0],setSelectLoading=_useState8[1];var axios=JwtService.getAxios();useEffect(function(){if(!open)return;var getData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,data,_voucher;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('/api/admin/voucher',{params:{vendor_id:userContext.user.vendor.xid,limit:50}});case 3:res=_context.sent;data=res.data.data.data;setVouchers(data.map(function(voucher){return{value:voucher.id,label:voucher.name};}));_voucher=data.pop();setVoucher(_voucher.id);setSelectLoading(false);_context.next=16;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(_context.t0);setSelectLoading(false);setVouchers([]);case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function getData(){return _ref2.apply(this,arguments);};}();getData();// eslint-disable-next-line\n},[open]);function checkDisabled(){return!premium_key||!voucher||loading;}function onChange(event){var target=event.target;if(target.name==='premium_key'){setPremiumKey(target.value);}if(target.name==='voucher'){setVoucher(target.value);}}function onClick(){handleClick(premium_key,voucher,userContext.user.vendor.xid);}return/*#__PURE__*/React.createElement(Dialog,{open:open,onClose:handleClose,\"aria-labelledby\":\"form-dialog-title\",maxWidth:\"sm\",fullWidth:true},/*#__PURE__*/React.createElement(DialogTitle,{id:\"form-dialog-title\"},title,\" Menu\"),/*#__PURE__*/React.createElement(DialogContent,null,loading?/*#__PURE__*/React.createElement(LinearProgress,null):/*#__PURE__*/React.createElement(Grid,{container:true,spacing:1},/*#__PURE__*/React.createElement(Grid,{item:true,\"col-md-12\":true},/*#__PURE__*/React.createElement(FormHelperText,{error:true},errorMessage)),/*#__PURE__*/React.createElement(Grid,{item:true,md:12},/*#__PURE__*/React.createElement(TextField,{autoFocus:true,margin:\"dense\",id:\"premium_key\",name:\"premium_key\",label:\"Premium Key\",type:\"text\",fullWidth:true,value:premium_key,onChange:onChange,variant:\"outlined\",error:error.premium_key?true:false,helperText:error.premium_key?error.premium_key:null})),/*#__PURE__*/React.createElement(Grid,{item:true,md:12},selectLoading?/*#__PURE__*/React.createElement(LinearProgress,null):/*#__PURE__*/React.createElement(TextField,{autoFocus:true,margin:\"dense\",id:\"voucher\",name:\"voucher\",label:\"Voucher\",fullWidth:true,select:true,onChange:onChange,value:voucher,variant:\"outlined\",error:error.voucher_id?true:false,helperText:error.voucher_id?error.voucher_id:null},vouchers.map(function(option){return/*#__PURE__*/React.createElement(\"option\",{key:option.value,value:option.value},option.label);}))))),/*#__PURE__*/React.createElement(DialogActions,null,/*#__PURE__*/React.createElement(Button,{disabled:checkDisabled(),variant:\"contained\",color:\"primary\",onClick:onClick},\"Create\")));}export default withStyles(styles)(RedemptionDialog);","map":null,"metadata":{},"sourceType":"module"}