{"ast":null,"code":"import _slicedToArray from\"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import NavLinkAdapter from'@fuse/core/NavLinkAdapter';import FuseUtils from'@fuse/utils';import Collapse from'@material-ui/core/Collapse';import Icon from'@material-ui/core/Icon';import IconButton from'@material-ui/core/IconButton';import ListItem from'@material-ui/core/ListItem';import ListItemText from'@material-ui/core/ListItemText';import{makeStyles}from'@material-ui/core/styles';import clsx from'clsx';import React,{useEffect,useState,useMemo}from'react';import{useTranslation}from'react-i18next';import{useSelector}from'react-redux';import{withRouter}from'react-router-dom';import FuseNavBadge from'../FuseNavBadge';import FuseNavItem from'../FuseNavItem';var useStyles=makeStyles(function(theme){return{root:{padding:0,'&.open':{backgroundColor:theme.palette.type==='dark'?'rgba(255,255,255,.015)':'rgba(0,0,0,.04)'}},item:function item(props){return{height:40,width:'calc(100% - 16px)',borderRadius:'0 20px 20px 0',paddingRight:12,paddingLeft:props.itemPadding>80?80:props.itemPadding,color:theme.palette.text.primary,'&.active > .list-item-text > span':{fontWeight:600},'& .list-item-icon':{marginRight:16}};}};});function needsToBeOpened(location,item){return location&&isUrlInChildren(item,location.pathname);}function isUrlInChildren(parent,url){if(!parent.children){return false;}for(var i=0;i<parent.children.length;i+=1){if(parent.children[i].children){if(isUrlInChildren(parent.children[i],url)){return true;}}if(parent.children[i].url===url||url.includes(parent.children[i].url)){return true;}}return false;}function FuseNavVerticalCollapse(props){var userRole=useSelector(function(_ref){var auth=_ref.auth;return auth.user.role;});var _useState=useState(function(){return needsToBeOpened(props.location,props.item);}),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var item=props.item,nestedLevel=props.nestedLevel;var classes=useStyles({itemPadding:nestedLevel>0?40+nestedLevel*16:24});var _useTranslation=useTranslation('navigation'),t=_useTranslation.t;useEffect(function(){if(needsToBeOpened(props.location,props.item)){if(!open){setOpen(true);}}// eslint-disable-next-line\n},[props.location,props.item]);function handleClick(){setOpen(!open);}var hasPermission=useMemo(function(){return FuseUtils.hasPermission(item.auth,userRole);},[item.auth,userRole]);if(!hasPermission){return null;}return/*#__PURE__*/React.createElement(\"ul\",{className:clsx(classes.root,open&&'open')},/*#__PURE__*/React.createElement(ListItem,{button:true,className:clsx(classes.item,'list-item'),onClick:handleClick,component:item.url?NavLinkAdapter:'li',to:item.url,role:\"button\"},item.icon&&/*#__PURE__*/React.createElement(Icon,{color:\"action\",className:\"list-item-icon text-16 flex-shrink-0\"},item.icon),/*#__PURE__*/React.createElement(ListItemText,{className:\"list-item-text\",primary:item.translate?t(item.translate):item.title,classes:{primary:'text-14'}}),item.badge&&/*#__PURE__*/React.createElement(FuseNavBadge,{className:\"mx-4\",badge:item.badge}),/*#__PURE__*/React.createElement(IconButton,{disableRipple:true,className:\"w-40 h-40 -mx-12 p-0 focus:bg-transparent hover:bg-transparent\",onClick:function onClick(ev){return ev.preventDefault();}},/*#__PURE__*/React.createElement(Icon,{className:\"text-16 arrow-icon\",color:\"inherit\"},open?'expand_less':'expand_more'))),item.children&&/*#__PURE__*/React.createElement(Collapse,{in:open,className:\"collapse-children\"},item.children.map(function(_item){return/*#__PURE__*/React.createElement(FuseNavItem,{key:_item.id,type:\"vertical-\".concat(_item.type),item:_item,nestedLevel:nestedLevel+1});})));}FuseNavVerticalCollapse.defaultProps={};var NavVerticalCollapse=withRouter(React.memo(FuseNavVerticalCollapse));export default NavVerticalCollapse;","map":null,"metadata":{},"sourceType":"module"}