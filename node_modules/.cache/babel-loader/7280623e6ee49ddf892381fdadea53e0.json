{"ast":null,"code":"import _slicedToArray from\"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{withStyles,Dialog,DialogTitle,DialogContent,DialogActions,Button,Grid,LinearProgress,FormHelperText}from'@material-ui/core';import FuseChipSelect from'@fuse/core/FuseChipSelect';import JwtService from'app/services/jwtService';var styles=function styles(){return{};};function PingableVoucherDialog(_ref){var handleClick=_ref.handleClick,handleClose=_ref.handleClose,open=_ref.open,title=_ref.title,loading=_ref.loading,error=_ref.error,errorMessage=_ref.errorMessage;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),vendor_id=_useState2[0],setVendorId=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),voucher_id=_useState4[0],setVoucherId=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),vendors=_useState6[0],setVendors=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),vouchers=_useState8[0],setVouchers=_useState8[1];var axios=JwtService.getAxios();useEffect(function(){setVendors([]);setVouchers([]);setVoucherId({});setVendorId({});},[open]);function checkDisabled(){return!vendor_id.id||!voucher_id.value||loading;}function _onChange(value,name){if(name==='vendor'){setVouchers(vendors.find(function(vendor){return vendor.id===value.id;}).vouchers);setVendorId(value);}else if(name==='voucher'){setVoucherId(value);}}function promiseOptions(inputValue){if(inputValue.length<4)return Promise.resolve([]);return axios.get('/api/admin/get-parent-list',{params:{query:inputValue}}).then(function(res){var data=res.data;setVendors(data.data);return data.data.map(function(vendor){return{id:vendor.id,label:vendor.name};});});}function onClick(){handleClick(voucher_id.value);}return/*#__PURE__*/React.createElement(Dialog,{open:open,onClose:handleClose,\"aria-labelledby\":\"form-dialog-title\",maxWidth:\"sm\",fullWidth:true},/*#__PURE__*/React.createElement(DialogTitle,{id:\"form-dialog-title\"},title),/*#__PURE__*/React.createElement(DialogContent,null,loading?/*#__PURE__*/React.createElement(LinearProgress,null):/*#__PURE__*/React.createElement(Grid,{container:true,spacing:1},/*#__PURE__*/React.createElement(Grid,{item:true,md:12},/*#__PURE__*/React.createElement(FormHelperText,{error:true},errorMessage)),/*#__PURE__*/React.createElement(Grid,{item:true,md:12},/*#__PURE__*/React.createElement(FuseChipSelect,{className:\"mt-8 mb-8\",value:{value:vendor_id.id,label:vendor_id.label},onChange:function onChange(value){return _onChange(value,'vendor');},textFieldProps:{label:'Vendor',InputLabelProps:{shrink:true},variant:'outlined'},required:true,variant:\"async\",defaultOptions:true,loadOptions:promiseOptions})),/*#__PURE__*/React.createElement(Grid,{item:true,md:12},/*#__PURE__*/React.createElement(FuseChipSelect,{className:\"mt-8 mb-8\",value:{value:voucher_id.value,label:voucher_id.label},onChange:function onChange(value){return _onChange(value,'voucher');},textFieldProps:{label:'Voucher',InputLabelProps:{shrink:true},variant:'outlined'},options:vouchers.map(function(category){return{value:category.id,label:category.name};}),required:true,defaultOptions:true,loadOptions:promiseOptions})))),/*#__PURE__*/React.createElement(DialogActions,null,/*#__PURE__*/React.createElement(Button,{disabled:checkDisabled(),variant:\"contained\",color:\"primary\",onClick:onClick},\"Ping\"),/*#__PURE__*/React.createElement(Button,{disabledvariant:\"contained\",color:\"secondary\",onClick:handleClose},\"Cancel\")));}export default withStyles(styles)(PingableVoucherDialog);","map":null,"metadata":{},"sourceType":"module"}