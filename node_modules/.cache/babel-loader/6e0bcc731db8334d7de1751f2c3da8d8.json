{"ast":null,"code":"import _toConsumableArray from \"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"D:\\\\Projects\\\\live\\\\src\\\\app\\\\main\\\\customer\\\\Customers.js\";\nimport React, { useState, useEffect } from 'react';\nimport MaterialTable from 'material-table';\nimport JwtService from 'app/services/jwtService';\nimport Edit from './Edit';\nimport { Grid, Typography, Paper, TextField, Button } from '@material-ui/core';\nimport FusePageSimple from '@fuse/core/FusePageSimple';\nimport FuseChipSelect from '@fuse/core/FuseChipSelect';\n\nfunction Customers() {\n  var tableRef = React.createRef();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      orders = _useState2[0],\n      setOrders = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      search = _useState6[0],\n      setSearch = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      corporateApps = _useState8[0],\n      setCorporateApps = _useState8[1];\n\n  var _useState9 = useState({\n    value: 0,\n    label: 'Vouch Main'\n  }),\n      _useState10 = _slicedToArray(_useState9, 2),\n      corporateApp = _useState10[0],\n      setCorporateApp = _useState10[1];\n\n  useEffect(function () {\n    getCorporateApps();\n  }, []);\n\n  function getData() {\n    return _getData.apply(this, arguments);\n  }\n\n  function _getData() {\n    _getData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var axios, vouchers, resp;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              setLoading(true);\n              JwtService.init();\n              axios = JwtService.getAxios();\n              _context.next = 6;\n              return axios.get('/api/admin/search-customer', {\n                params: {\n                  query_param: search,\n                  corporate_app: corporateApp.value\n                }\n              });\n\n            case 6:\n              vouchers = _context.sent;\n              resp = vouchers.data;\n\n              if (resp.status) {\n                setOrders(resp.data);\n              } else {\n                setOrders([]);\n              }\n\n              setLoading(false);\n              _context.next = 16;\n              break;\n\n            case 12:\n              _context.prev = 12;\n              _context.t0 = _context[\"catch\"](0);\n              setOrders([]);\n              setLoading(false);\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 12]]);\n    }));\n    return _getData.apply(this, arguments);\n  }\n\n  function getCorporateApps() {\n    return _getCorporateApps.apply(this, arguments);\n  }\n\n  function _getCorporateApps() {\n    _getCorporateApps = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var axios, vouchers, resp;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              setLoading(true);\n              JwtService.init();\n              axios = JwtService.getAxios();\n              _context2.next = 6;\n              return axios.get('/api/admin/corporateApp');\n\n            case 6:\n              vouchers = _context2.sent;\n              resp = vouchers.data;\n\n              if (resp.status) {\n                setCorporateApps([{\n                  id: 0,\n                  name: 'Vouch Main'\n                }].concat(_toConsumableArray(resp.data.corporate_app)));\n              } else {\n                setCorporateApps([]);\n              }\n\n              setLoading(false);\n              _context2.next = 16;\n              break;\n\n            case 12:\n              _context2.prev = 12;\n              _context2.t0 = _context2[\"catch\"](0);\n              setCorporateApps([]);\n              setLoading(false);\n\n            case 16:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 12]]);\n    }));\n    return _getCorporateApps.apply(this, arguments);\n  }\n\n  function reload() {\n    return getData();\n  }\n\n  function Action(_ref) {\n    var action = _ref.action,\n        data = _ref.data;\n\n    switch (action.icon) {\n      case 'view':\n        return /*#__PURE__*/React.createElement(Edit, {\n          reload: reload,\n          slide_id: data.id ? data.id : null,\n          corporate_app: corporateApp.value,\n          is_view: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 6\n          }\n        });\n\n      default:\n        return /*#__PURE__*/React.createElement(React.Fragment, null);\n    }\n  }\n\n  function onChange(event) {\n    var target = event.target;\n    setSearch(target.value);\n  }\n\n  function handleChange(value) {\n    console.log(value);\n    setCorporateApp(value);\n  }\n\n  function onKeyPress(event) {\n    if (event.key === 'Enter' && search) {\n      getData();\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(FusePageSimple, {\n    header: /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      item: true,\n      justify: \"flex-end\",\n      direction: \"column\",\n      className: \"pl-12 pb-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 6\n      }\n    }, \"Customers\")),\n    content: /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      className: \"p-20\",\n      alignItems: \"baseline\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      md: 12,\n      className: \"mt-8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Paper, {\n      elevation: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      spacing: 4,\n      alignItems: \"center\",\n      className: \"ml-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      md: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      id: \"search\",\n      name: \"search\",\n      label: \"Search Query\",\n      InputLabelProps: {\n        shrink: true\n      },\n      helperText: \"Search with email, mobile number and premium key\",\n      fullWidth: true,\n      variant: \"outlined\",\n      onChange: onChange,\n      onKeyPress: onKeyPress,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      md: 4,\n      className: \"mb-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(FuseChipSelect, {\n      className: \"mt-8 mb-8\",\n      value: corporateApp,\n      onChange: function onChange(value) {\n        return handleChange(value);\n      },\n      textFieldProps: {\n        label: 'App Name',\n        InputLabelProps: {\n          shrink: true\n        },\n        variant: 'outlined'\n      },\n      options: corporateApps.map(function (corporateApp) {\n        return {\n          value: corporateApp.id,\n          label: corporateApp.name\n        };\n      }),\n      fullWidth: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      md: 4,\n      className: \"mb-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      disabled: !search,\n      className: \"mt-6\",\n      onClick: getData,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 11\n      }\n    }, \"Search\")))))), /*#__PURE__*/React.createElement(MaterialTable, {\n      data: orders,\n      ref: tableRef,\n      columns: [{\n        title: 'First Name',\n        field: 'fname'\n      }, {\n        title: 'Last Name',\n        field: 'lname'\n      }, {\n        title: 'Email',\n        field: 'email'\n      }, {\n        title: 'Phone',\n        field: 'phone'\n      }, {\n        title: 'Membership',\n        field: 'membership.name'\n      }],\n      isLoading: loading,\n      actions: [{\n        icon: 'view',\n        onClick: function onClick() {}\n      }],\n      options: {\n        pageSize: 10,\n        pageSizeOptions: [10, 20, 50],\n        actionsColumnIndex: -1,\n        showTitle: false,\n        overflowY: 'visible',\n        headerStyle: {\n          zIndex: 0\n        }\n      },\n      components: {\n        Action: Action\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 6\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 3\n    }\n  });\n}\n\nexport default Customers;","map":{"version":3,"sources":["D:/Projects/live/src/app/main/customer/Customers.js"],"names":["React","useState","useEffect","MaterialTable","JwtService","Edit","Grid","Typography","Paper","TextField","Button","FusePageSimple","FuseChipSelect","Customers","tableRef","createRef","orders","setOrders","loading","setLoading","search","setSearch","corporateApps","setCorporateApps","value","label","corporateApp","setCorporateApp","getCorporateApps","getData","init","axios","getAxios","get","params","query_param","corporate_app","vouchers","resp","data","status","id","name","reload","Action","action","icon","onChange","event","target","handleChange","console","log","onKeyPress","key","shrink","InputLabelProps","variant","map","title","field","onClick","pageSize","pageSizeOptions","actionsColumnIndex","showTitle","overflowY","headerStyle","zIndex"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport MaterialTable from 'material-table';\nimport JwtService from 'app/services/jwtService';\nimport Edit from './Edit';\nimport { Grid, Typography, Paper, TextField, Button } from '@material-ui/core';\nimport FusePageSimple from '@fuse/core/FusePageSimple';\nimport FuseChipSelect from '@fuse/core/FuseChipSelect';\n\nfunction Customers() {\n\tconst tableRef = React.createRef();\n\tconst [orders, setOrders] = useState([]);\n\tconst [loading, setLoading] = useState(false);\n\tconst [search, setSearch] = useState(null);\n\tconst [corporateApps, setCorporateApps] = useState([]);\n\tconst [corporateApp, setCorporateApp] = useState({ value: 0, label: 'Vouch Main' });\n\n\tuseEffect(() => {\n\t\tgetCorporateApps();\n\t}, []);\n\n\tasync function getData() {\n\t\ttry {\n\t\t\tsetLoading(true);\n\t\t\tJwtService.init();\n\t\t\tconst axios = JwtService.getAxios();\n\t\t\tconst vouchers = await axios.get('/api/admin/search-customer', {\n\t\t\t\tparams: {\n\t\t\t\t\tquery_param: search,\n\t\t\t\t\tcorporate_app: corporateApp.value\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst resp = vouchers.data;\n\t\t\tif (resp.status) {\n\t\t\t\tsetOrders(resp.data);\n\t\t\t} else {\n\t\t\t\tsetOrders([]);\n\t\t\t}\n\t\t\tsetLoading(false);\n\t\t} catch (ex) {\n\t\t\tsetOrders([]);\n\t\t\tsetLoading(false);\n\t\t}\n\t}\n\n\tasync function getCorporateApps() {\n\t\ttry {\n\t\t\tsetLoading(true);\n\t\t\tJwtService.init();\n\t\t\tconst axios = JwtService.getAxios();\n\t\t\tconst vouchers = await axios.get('/api/admin/corporateApp');\n\t\t\tconst resp = vouchers.data;\n\t\t\tif (resp.status) {\n\t\t\t\tsetCorporateApps([{ id: 0, name: 'Vouch Main' }, ...resp.data.corporate_app]);\n\t\t\t} else {\n\t\t\t\tsetCorporateApps([]);\n\t\t\t}\n\t\t\tsetLoading(false);\n\t\t} catch (ex) {\n\t\t\tsetCorporateApps([]);\n\t\t\tsetLoading(false);\n\t\t}\n\t}\n\n\tfunction reload() {\n\t\treturn getData();\n\t}\n\n\tfunction Action({ action, data }) {\n\t\tswitch (action.icon) {\n\t\t\tcase 'view':\n\t\t\t\treturn (\n\t\t\t\t\t<Edit\n\t\t\t\t\t\treload={reload}\n\t\t\t\t\t\tslide_id={data.id ? data.id : null}\n\t\t\t\t\t\tcorporate_app={corporateApp.value}\n\t\t\t\t\t\tis_view={true}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\tdefault:\n\t\t\t\treturn <></>;\n\t\t}\n\t}\n\n\tfunction onChange(event) {\n\t\tconst target = event.target;\n\t\tsetSearch(target.value);\n\t}\n\n\tfunction handleChange(value) {\n\t\tconsole.log(value);\n\t\tsetCorporateApp(value);\n\t}\n\n\tfunction onKeyPress(event) {\n\t\tif (event.key === 'Enter' && search) {\n\t\t\tgetData();\n\t\t}\n\t}\n\n\treturn (\n\t\t<FusePageSimple\n\t\t\theader={\n\t\t\t\t<Grid container item justify=\"flex-end\" direction=\"column\" className=\"pl-12 pb-12\">\n\t\t\t\t\t<Typography variant=\"h4\">Customers</Typography>\n\t\t\t\t</Grid>\n\t\t\t}\n\t\t\tcontent={\n\t\t\t\t<>\n\t\t\t\t\t<Grid container className=\"p-20\" alignItems=\"baseline\">\n\t\t\t\t\t\t<Grid item md={12} className=\"mt-8\">\n\t\t\t\t\t\t\t<Paper elevation={4}>\n\t\t\t\t\t\t\t\t<Grid container spacing={4} alignItems=\"center\" className=\"ml-12\">\n\t\t\t\t\t\t\t\t\t<Grid item md={4}>\n\t\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\t\tid=\"search\"\n\t\t\t\t\t\t\t\t\t\t\tname=\"search\"\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Search Query\"\n\t\t\t\t\t\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\t\t\t\t\t\tshrink: true\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\thelperText=\"Search with email, mobile number and premium key\"\n\t\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t\t\t\t\tonKeyPress={onKeyPress}\n\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t<Grid item md={4} className=\"mb-12\">\n\t\t\t\t\t\t\t\t\t\t<FuseChipSelect\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"mt-8 mb-8\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={corporateApp}\n\t\t\t\t\t\t\t\t\t\t\tonChange={value => handleChange(value)}\n\t\t\t\t\t\t\t\t\t\t\ttextFieldProps={{\n\t\t\t\t\t\t\t\t\t\t\t\tlabel: 'App Name',\n\t\t\t\t\t\t\t\t\t\t\t\tInputLabelProps: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tshrink: true\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tvariant: 'outlined'\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\toptions={corporateApps.map(corporateApp => ({\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: corporateApp.id,\n\t\t\t\t\t\t\t\t\t\t\t\tlabel: corporateApp.name\n\t\t\t\t\t\t\t\t\t\t\t}))}\n\t\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t<Grid item md={4} className=\"mb-12\">\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={!search}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"mt-6\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={getData}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tSearch\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t</Paper>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<MaterialTable\n\t\t\t\t\t\tdata={orders}\n\t\t\t\t\t\tref={tableRef}\n\t\t\t\t\t\tcolumns={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: 'First Name',\n\t\t\t\t\t\t\t\tfield: 'fname'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: 'Last Name',\n\t\t\t\t\t\t\t\tfield: 'lname'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: 'Email',\n\t\t\t\t\t\t\t\tfield: 'email'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: 'Phone',\n\t\t\t\t\t\t\t\tfield: 'phone'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: 'Membership',\n\t\t\t\t\t\t\t\tfield: 'membership.name'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tisLoading={loading}\n\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ticon: 'view',\n\t\t\t\t\t\t\t\tonClick: () => {}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]}\n\t\t\t\t\t\toptions={{\n\t\t\t\t\t\t\tpageSize: 10,\n\t\t\t\t\t\t\tpageSizeOptions: [10, 20, 50],\n\t\t\t\t\t\t\tactionsColumnIndex: -1,\n\t\t\t\t\t\t\tshowTitle: false,\n\t\t\t\t\t\t\toverflowY: 'visible',\n\t\t\t\t\t\t\theaderStyle: {\n\t\t\t\t\t\t\t\tzIndex: 0\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tcomponents={{\n\t\t\t\t\t\t\tAction\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t}\n\t\t/>\n\t);\n}\n\nexport default Customers;\n"]},"metadata":{},"sourceType":"module"}