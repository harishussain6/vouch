{"ast":null,"code":"import _objectSpread from\"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import{TextFieldFormsy}from'@fuse/core/formsy';import{CircularProgress,Grid}from'@material-ui/core';import Button from'@material-ui/core/Button';import Icon from'@material-ui/core/Icon';import InputAdornment from'@material-ui/core/InputAdornment';import*as authActions from'app/auth/store/actions';import Formsy from'formsy-react';import React,{useEffect,useRef,useState}from'react';import{useDispatch,useSelector}from'react-redux';function LoginForm(props){var dispatch=useDispatch();var login=useSelector(function(_ref){var auth=_ref.auth;return auth.login;});var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isFormValid=_useState2[0],setIsFormValid=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var formRef=useRef(null);useEffect(function(){if(login.error&&(login.error.email||login.error.password)){formRef.current.updateInputsWithError(_objectSpread({},login.error));disableButton();setLoading(false);}// eslint-disable-next-line\n},[login]);function disableButton(){setIsFormValid(false);}function enableButton(){setIsFormValid(true);}function handleSubmit(model){setLoading(true);dispatch(authActions.submitLogin(model));}return/*#__PURE__*/React.createElement(\"div\",{className:\"w-full\"},/*#__PURE__*/React.createElement(Formsy,{onValidSubmit:handleSubmit,onValid:enableButton,onInvalid:disableButton,ref:formRef,className:\"flex flex-col justify-center w-full\"},/*#__PURE__*/React.createElement(TextFieldFormsy,{className:\"mb-16\",type:\"text\",name:\"email\",label:\"Username/Email\",validations:{minLength:4},validationErrors:{minLength:'Min character length is 4'},InputProps:{endAdornment:/*#__PURE__*/React.createElement(InputAdornment,{position:\"end\"},/*#__PURE__*/React.createElement(Icon,{className:\"text-20\",color:\"action\"},\"email\"))},variant:\"outlined\",required:true}),/*#__PURE__*/React.createElement(TextFieldFormsy,{className:\"mb-16\",type:\"password\",name:\"password\",label:\"Password\",validations:{minLength:4},validationErrors:{minLength:'Min character length is 4'},InputProps:{endAdornment:/*#__PURE__*/React.createElement(InputAdornment,{position:\"end\"},/*#__PURE__*/React.createElement(Icon,{className:\"text-20\",color:\"action\"},\"vpn_key\"))},variant:\"outlined\",required:true}),loading?/*#__PURE__*/React.createElement(Grid,{container:true,justify:\"center\"},/*#__PURE__*/React.createElement(CircularProgress,null)):/*#__PURE__*/React.createElement(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",className:\"w-full mx-auto mt-16 normal-case\",\"aria-label\":\"LOG IN\",disabled:!isFormValid,value:\"legacy\"},\"Login\")));}export default LoginForm;","map":null,"metadata":{},"sourceType":"module"}