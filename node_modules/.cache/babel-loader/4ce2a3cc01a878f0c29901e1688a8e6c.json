{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"D:\\\\Projects\\\\live\\\\src\\\\app\\\\main\\\\landing-list\\\\LandingList.js\";\nimport React, { useEffect, useState } from 'react';\nimport MaterialTable from 'material-table';\nimport JwtService from 'app/services/jwtService';\nimport Add from './Add';\nimport Edit from './Edit';\nimport { Grid, Typography, Paper, Button, LinearProgress } from '@material-ui/core';\nimport FuseChipSelect from '@fuse/core/FuseChipSelect';\nimport FusePageSimple from '@fuse/core/FusePageSimple';\nJwtService.init();\nvar axios = JwtService.getAxios();\n\nfunction LandingList() {\n  var _this = this;\n\n  var tableRef = React.createRef();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      sliders = _useState2[0],\n      setSliders = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useState5 = useState({\n    value: 1,\n    label: 'vouch365'\n  }),\n      _useState6 = _slicedToArray(_useState5, 2),\n      partner_id = _useState6[0],\n      setPartnerId = _useState6[1];\n\n  var _useState7 = useState({\n    value: 1,\n    label: 'free'\n  }),\n      _useState8 = _slicedToArray(_useState7, 2),\n      membership_id = _useState8[0],\n      setMembershipId = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      memberships = _useState10[0],\n      setMemberships = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      partners = _useState12[0],\n      setPartners = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      selectLoading = _useState14[0],\n      setSelectLoading = _useState14[1];\n\n  useEffect(function () {\n    if (!selectLoading) getOptions(); // eslint-disable-next-line\n  }, []);\n  useEffect(function () {\n    if (partners.length > 0 && memberships.length > 0) setSelectLoading(false);\n  }, [partners, memberships]);\n\n  function getOptions() {\n    setSelectLoading(true);\n    axios.get('/api/admin/membership').then(function (res) {\n      var data = res.data.data;\n      setMemberships(data.membership);\n    });\n    axios.get('/api/admin/partner').then(function (res) {\n      var data = res.data.data;\n      setPartners(data.partners);\n    });\n  }\n\n  function getData() {\n    return _getData.apply(this, arguments);\n  }\n\n  function _getData() {\n    _getData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var axios, vouchers, resp;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setLoading(true);\n              axios = JwtService.getAxios();\n              _context.next = 4;\n              return axios.get('/api/admin/landingList', {\n                params: {\n                  partner_id: partner_id.value,\n                  membership_id: membership_id.value\n                }\n              });\n\n            case 4:\n              vouchers = _context.sent;\n              resp = vouchers.data;\n\n              if (resp.status) {\n                setSliders(resp.data.landingList);\n              } else {\n                setSliders([]);\n              }\n\n              setLoading(false);\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _getData.apply(this, arguments);\n  }\n\n  function reload() {\n    return getData();\n  }\n\n  function Action(_ref) {\n    var action = _ref.action,\n        data = _ref.data;\n\n    switch (action.icon) {\n      case 'save':\n        return /*#__PURE__*/React.createElement(Add, {\n          reload: reload,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 12\n          }\n        });\n\n      case 'edit':\n        return /*#__PURE__*/React.createElement(Edit, {\n          reload: reload,\n          slide_id: data.id ? data.id : null,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 12\n          }\n        });\n\n      default:\n        return /*#__PURE__*/React.createElement(React.Fragment, null);\n    }\n  }\n\n  function handleChipChange(value, name) {\n    if (name === 'partner_id') {\n      setPartnerId(value);\n    } else if (name === 'membership_id') {\n      setMembershipId(value);\n    }\n  }\n\n  function isDisabled() {\n    return false;\n  }\n\n  return /*#__PURE__*/React.createElement(FusePageSimple, {\n    header: /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      item: true,\n      justify: \"flex-end\",\n      direction: \"column\",\n      className: \"pl-12 pb-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 6\n      }\n    }, \"LandingList\")),\n    content: /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      className: \"p-20\",\n      justify: \"space-between\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      md: 12,\n      className: \"mt-8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(Paper, {\n      elevation: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 7\n      }\n    }, selectLoading ? /*#__PURE__*/React.createElement(LinearProgress, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }\n    }) : /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      spacing: 4,\n      alignItems: \"center\",\n      className: \"ml-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      md: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(FuseChipSelect, {\n      className: \"mt-8 mb-8\",\n      value: membership_id,\n      onChange: function onChange(value) {\n        return handleChipChange(value, 'membership_id');\n      },\n      placeholder: \"Select membership\",\n      textFieldProps: {\n        label: 'Memberships',\n        InputLabelProps: {\n          shrink: true\n        },\n        variant: 'outlined'\n      },\n      options: memberships.map(function (membership) {\n        return {\n          value: membership.id,\n          label: membership.name\n        };\n      }),\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      md: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(FuseChipSelect, {\n      className: \"mt-8 mb-8\",\n      value: partner_id,\n      onChange: function onChange(value) {\n        return handleChipChange(value, 'partner_id');\n      },\n      placeholder: \"Select multiple partners\",\n      textFieldProps: {\n        label: 'Partners',\n        InputLabelProps: {\n          shrink: true\n        },\n        variant: 'outlined'\n      },\n      options: partners.map(function (partner) {\n        return {\n          value: partner.id,\n          label: partner.name\n        };\n      }),\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      className: \"mb-23\",\n      color: \"primary\",\n      disabled: isDisabled(),\n      onClick: getData,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 11\n      }\n    }, \"Search\"))))), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      md: 12,\n      className: \"mt-28\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(MaterialTable, {\n      data: sliders,\n      ref: tableRef,\n      columns: [{\n        title: 'Tag',\n        field: 'tag'\n      }, {\n        title: 'Status',\n        field: 'status'\n      }, {\n        title: 'Link Type',\n        field: 'linktype'\n      }, {\n        title: 'Link',\n        field: 'link'\n      }, {\n        title: 'Logo',\n        field: 'logo',\n        // render: rowData => <img src={rowData.url} style={{width: 50, borderRadius: '50%'}}/>,\n        render: function render(rowData) {\n          return /*#__PURE__*/React.createElement(\"a\", {\n            href: rowData.logo,\n            target: \"_blank\",\n            rel: \"noopener noreferrer\",\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 11\n            }\n          }, /*#__PURE__*/React.createElement(\"img\", {\n            src: rowData.logo,\n            alt: rowData.tag,\n            style: {\n              width: 150\n            },\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 12\n            }\n          }));\n        }\n      }, {\n        title: 'Background',\n        field: 'background',\n        // render: rowData => <img src={rowData.url} style={{width: 50, borderRadius: '50%'}}/>,\n        render: function render(rowData) {\n          return /*#__PURE__*/React.createElement(\"a\", {\n            href: rowData.background,\n            target: \"_blank\",\n            rel: \"noopener noreferrer\",\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 11\n            }\n          }, /*#__PURE__*/React.createElement(\"img\", {\n            src: rowData.background,\n            alt: rowData.tag,\n            style: {\n              width: 150\n            },\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 12\n            }\n          }));\n        }\n      }],\n      isLoading: loading,\n      actions: [{\n        icon: 'save',\n        isFreeAction: true,\n        onClick: function onClick() {}\n      }, {\n        icon: 'edit',\n        onClick: function onClick() {}\n      }],\n      options: {\n        pageSize: 10,\n        pageSizeOptions: [10, 20, 50],\n        actionsColumnIndex: -1,\n        showTitle: false,\n        overflowY: 'visible',\n        headerStyle: {\n          zIndex: 0\n        }\n      },\n      components: {\n        Action: Action\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 7\n      }\n    }))),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 3\n    }\n  });\n}\n\nexport default LandingList;","map":{"version":3,"sources":["D:/Projects/live/src/app/main/landing-list/LandingList.js"],"names":["React","useEffect","useState","MaterialTable","JwtService","Add","Edit","Grid","Typography","Paper","Button","LinearProgress","FuseChipSelect","FusePageSimple","init","axios","getAxios","LandingList","tableRef","createRef","sliders","setSliders","loading","setLoading","value","label","partner_id","setPartnerId","membership_id","setMembershipId","memberships","setMemberships","partners","setPartners","selectLoading","setSelectLoading","getOptions","length","get","then","res","data","membership","getData","params","vouchers","resp","status","landingList","reload","Action","action","icon","id","handleChipChange","name","isDisabled","InputLabelProps","shrink","variant","map","partner","title","field","render","rowData","logo","tag","width","background","isFreeAction","onClick","pageSize","pageSizeOptions","actionsColumnIndex","showTitle","overflowY","headerStyle","zIndex"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport MaterialTable from 'material-table';\nimport JwtService from 'app/services/jwtService';\nimport Add from './Add';\nimport Edit from './Edit';\nimport { Grid, Typography, Paper, Button, LinearProgress } from '@material-ui/core';\nimport FuseChipSelect from '@fuse/core/FuseChipSelect';\nimport FusePageSimple from '@fuse/core/FusePageSimple';\nJwtService.init();\nconst axios = JwtService.getAxios();\n\nfunction LandingList() {\n\tconst tableRef = React.createRef();\n\tconst [sliders, setSliders] = useState([]);\n\tconst [loading, setLoading] = useState(false);\n\tconst [partner_id, setPartnerId] = useState({ value: 1, label: 'vouch365' });\n\tconst [membership_id, setMembershipId] = useState({ value: 1, label: 'free' });\n\tconst [memberships, setMemberships] = useState([]);\n\tconst [partners, setPartners] = useState([]);\n\tconst [selectLoading, setSelectLoading] = useState(false);\n\tuseEffect(() => {\n\t\tif (!selectLoading) getOptions();\n\t\t// eslint-disable-next-line\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (partners.length > 0 && memberships.length > 0) setSelectLoading(false);\n\t}, [partners, memberships]);\n\n\tfunction getOptions() {\n\t\tsetSelectLoading(true);\n\t\taxios.get('/api/admin/membership').then(res => {\n\t\t\tconst data = res.data.data;\n\t\t\tsetMemberships(data.membership);\n\t\t});\n\t\taxios.get('/api/admin/partner').then(res => {\n\t\t\tconst data = res.data.data;\n\t\t\tsetPartners(data.partners);\n\t\t});\n\t}\n\n\tasync function getData() {\n\t\tsetLoading(true);\n\t\tconst axios = JwtService.getAxios();\n\t\tconst vouchers = await axios.get('/api/admin/landingList', {\n\t\t\tparams: {\n\t\t\t\tpartner_id: partner_id.value,\n\t\t\t\tmembership_id: membership_id.value\n\t\t\t}\n\t\t});\n\t\tconst resp = vouchers.data;\n\t\tif (resp.status) {\n\t\t\tsetSliders(resp.data.landingList);\n\t\t} else {\n\t\t\tsetSliders([]);\n\t\t}\n\t\tsetLoading(false);\n\t}\n\tfunction reload() {\n\t\treturn getData();\n\t}\n\n\tfunction Action({ action, data }) {\n\t\tswitch (action.icon) {\n\t\t\tcase 'save':\n\t\t\t\treturn <Add reload={reload} />;\n\t\t\tcase 'edit':\n\t\t\t\treturn <Edit reload={reload} slide_id={data.id ? data.id : null} />;\n\t\t\tdefault:\n\t\t\t\treturn <></>;\n\t\t}\n\t}\n\n\tfunction handleChipChange(value, name) {\n\t\tif (name === 'partner_id') {\n\t\t\tsetPartnerId(value);\n\t\t} else if (name === 'membership_id') {\n\t\t\tsetMembershipId(value);\n\t\t}\n\t}\n\n\tfunction isDisabled() {\n\t\treturn false;\n\t}\n\treturn (\n\t\t<FusePageSimple\n\t\t\theader={\n\t\t\t\t<Grid container item justify=\"flex-end\" direction=\"column\" className=\"pl-12 pb-12\">\n\t\t\t\t\t<Typography variant=\"h4\">LandingList</Typography>\n\t\t\t\t</Grid>\n\t\t\t}\n\t\t\tcontent={\n\t\t\t\t<Grid container className=\"p-20\" justify=\"space-between\">\n\t\t\t\t\t<Grid item md={12} className=\"mt-8\">\n\t\t\t\t\t\t<Paper elevation={4}>\n\t\t\t\t\t\t\t{selectLoading ? (\n\t\t\t\t\t\t\t\t<LinearProgress />\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<Grid container spacing={4} alignItems=\"center\" className=\"ml-4\">\n\t\t\t\t\t\t\t\t\t<Grid item md={4}>\n\t\t\t\t\t\t\t\t\t\t<FuseChipSelect\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"mt-8 mb-8\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={membership_id}\n\t\t\t\t\t\t\t\t\t\t\tonChange={value => handleChipChange(value, 'membership_id')}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Select membership\"\n\t\t\t\t\t\t\t\t\t\t\ttextFieldProps={{\n\t\t\t\t\t\t\t\t\t\t\t\tlabel: 'Memberships',\n\t\t\t\t\t\t\t\t\t\t\t\tInputLabelProps: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tshrink: true\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tvariant: 'outlined'\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\toptions={memberships.map(membership => ({\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: membership.id,\n\t\t\t\t\t\t\t\t\t\t\t\tlabel: membership.name\n\t\t\t\t\t\t\t\t\t\t\t}))}\n\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t<Grid item md={4}>\n\t\t\t\t\t\t\t\t\t\t<FuseChipSelect\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"mt-8 mb-8\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={partner_id}\n\t\t\t\t\t\t\t\t\t\t\tonChange={value => handleChipChange(value, 'partner_id')}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Select multiple partners\"\n\t\t\t\t\t\t\t\t\t\t\ttextFieldProps={{\n\t\t\t\t\t\t\t\t\t\t\t\tlabel: 'Partners',\n\t\t\t\t\t\t\t\t\t\t\t\tInputLabelProps: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tshrink: true\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tvariant: 'outlined'\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\toptions={partners.map(partner => ({\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: partner.id,\n\t\t\t\t\t\t\t\t\t\t\t\tlabel: partner.name\n\t\t\t\t\t\t\t\t\t\t\t}))}\n\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"mb-23\"\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={isDisabled()}\n\t\t\t\t\t\t\t\t\t\t\tonClick={getData}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tSearch\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Paper>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item md={12} className=\"mt-28\">\n\t\t\t\t\t\t<MaterialTable\n\t\t\t\t\t\t\tdata={sliders}\n\t\t\t\t\t\t\tref={tableRef}\n\t\t\t\t\t\t\tcolumns={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'Tag',\n\t\t\t\t\t\t\t\t\tfield: 'tag'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'Status',\n\t\t\t\t\t\t\t\t\tfield: 'status'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'Link Type',\n\t\t\t\t\t\t\t\t\tfield: 'linktype'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'Link',\n\t\t\t\t\t\t\t\t\tfield: 'link'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'Logo',\n\t\t\t\t\t\t\t\t\tfield: 'logo',\n\t\t\t\t\t\t\t\t\t// render: rowData => <img src={rowData.url} style={{width: 50, borderRadius: '50%'}}/>,\n\t\t\t\t\t\t\t\t\trender: rowData => (\n\t\t\t\t\t\t\t\t\t\t<a href={rowData.logo} target=\"_blank\" rel=\"noopener noreferrer\">\n\t\t\t\t\t\t\t\t\t\t\t<img src={rowData.logo} alt={rowData.tag} style={{ width: 150 }} />\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'Background',\n\t\t\t\t\t\t\t\t\tfield: 'background',\n\t\t\t\t\t\t\t\t\t// render: rowData => <img src={rowData.url} style={{width: 50, borderRadius: '50%'}}/>,\n\t\t\t\t\t\t\t\t\trender: rowData => (\n\t\t\t\t\t\t\t\t\t\t<a href={rowData.background} target=\"_blank\" rel=\"noopener noreferrer\">\n\t\t\t\t\t\t\t\t\t\t\t<img src={rowData.background} alt={rowData.tag} style={{ width: 150 }} />\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\tisLoading={loading}\n\t\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ticon: 'save',\n\t\t\t\t\t\t\t\t\tisFreeAction: true,\n\t\t\t\t\t\t\t\t\tonClick: () => {}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ticon: 'edit',\n\t\t\t\t\t\t\t\t\tonClick: () => {}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\toptions={{\n\t\t\t\t\t\t\t\tpageSize: 10,\n\t\t\t\t\t\t\t\tpageSizeOptions: [10, 20, 50],\n\t\t\t\t\t\t\t\tactionsColumnIndex: -1,\n\t\t\t\t\t\t\t\tshowTitle: false,\n\t\t\t\t\t\t\t\toverflowY: 'visible',\n\t\t\t\t\t\t\t\theaderStyle: {\n\t\t\t\t\t\t\t\t\tzIndex: 0\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tcomponents={{\n\t\t\t\t\t\t\t\tAction\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t}\n\t\t/>\n\t);\n}\n\nexport default LandingList;\n"]},"metadata":{},"sourceType":"module"}