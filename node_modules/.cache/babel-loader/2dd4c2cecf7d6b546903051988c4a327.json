{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"D:\\\\Projects\\\\live\\\\src\\\\app\\\\main\\\\task\\\\Tasks.js\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport MaterialTable from 'material-table';\nimport JwtService from 'app/services/jwtService';\nimport Add from './Add';\nimport Edit from './Edit';\nimport { UserContext } from 'app/context/UserContext';\nimport AddTask from './AddTask';\nJwtService.init();\nvar axios = JwtService.getAxios();\n\nfunction Tasks() {\n  var tableRef = React.createRef();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      orders = _useState2[0],\n      setOrders = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var userContext = useContext(UserContext);\n  useEffect(function () {\n    if (!loading) getData(); // eslint-disable-next-line\n  }, []);\n\n  function getData() {\n    return _getData.apply(this, arguments);\n  }\n\n  function _getData() {\n    _getData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var url, vouchers, resp;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              setLoading(true);\n              url = '/api/admin/tasks';\n\n              if (userContext.user.user_type === 'creative') {\n                url += \"?user_id=\".concat(userContext.user.id, \"&status=active\");\n              }\n\n              _context.next = 6;\n              return axios.get(url);\n\n            case 6:\n              vouchers = _context.sent;\n              resp = vouchers.data;\n\n              if (resp.status) {\n                setOrders(resp.data.tasks);\n              } else {\n                setOrders([]);\n              }\n\n              setLoading(false);\n              _context.next = 16;\n              break;\n\n            case 12:\n              _context.prev = 12;\n              _context.t0 = _context[\"catch\"](0);\n              setOrders([]);\n              setLoading(false);\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 12]]);\n    }));\n    return _getData.apply(this, arguments);\n  }\n\n  function reload() {\n    return getData();\n  }\n\n  function Action(_ref) {\n    var action = _ref.action,\n        data = _ref.data;\n\n    switch (action.icon) {\n      case 'save':\n        return userContext.user.user_type === 'creative' ? /*#__PURE__*/React.createElement(React.Fragment, null) : /*#__PURE__*/React.createElement(Add, {\n          reload: reload,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 64\n          }\n        });\n\n      case 'edit':\n        return userContext.user.user_type === 'creative' ? /*#__PURE__*/React.createElement(AddTask, {\n          task_id: data.id,\n          key: data.id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 6\n          }\n        }) : /*#__PURE__*/React.createElement(Edit, {\n          reload: reload,\n          slide_id: data.id ? data.id : null,\n          key: data.id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 6\n          }\n        });\n\n      case 'view':\n        return /*#__PURE__*/React.createElement(Edit, {\n          reload: reload,\n          slide_id: data.id ? data.id : null,\n          is_view: true,\n          key: data.id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 12\n          }\n        });\n\n      default:\n        return /*#__PURE__*/React.createElement(React.Fragment, null);\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(MaterialTable, {\n    title: \"Tasks\",\n    data: orders,\n    ref: tableRef,\n    columns: [{\n      title: 'Task',\n      field: 'task'\n    }, {\n      title: 'Description',\n      field: 'description'\n    }, {\n      title: 'Type',\n      field: 'task_type'\n    }, {\n      title: 'Vendor',\n      field: 'vendor.name',\n      render: function render(rowData) {\n        return rowData.vendor ? \"\".concat(rowData.vendor.name, \" (\").concat(rowData.vendor.locality, \")\") : '';\n      }\n    }, {\n      title: 'Duration',\n      field: 'duration'\n    }, {\n      title: 'Status',\n      field: 'status'\n    }, {\n      title: 'Total Tasks',\n      field: 'no_of_tasks'\n    }, {\n      title: 'Completed Tasks',\n      field: 'no_of_tasks_completed'\n    }],\n    isLoading: loading,\n    actions: [{\n      icon: 'save',\n      isFreeAction: true,\n      onClick: function onClick() {}\n    }, {\n      icon: 'edit',\n      onClick: function onClick() {}\n    }, {\n      icon: 'view',\n      onClick: function onClick() {}\n    }],\n    options: {\n      pageSize: 10,\n      pageSizeOptions: [10, 20, 50],\n      actionsColumnIndex: -1,\n      overflowY: 'visible',\n      headerStyle: {\n        zIndex: -1\n      },\n      rowStyle: {\n        zIndex: -1\n      }\n    },\n    components: {\n      Action: Action\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 3\n    }\n  });\n}\n\nexport default Tasks;","map":{"version":3,"sources":["D:/Projects/live/src/app/main/task/Tasks.js"],"names":["React","useContext","useEffect","useState","MaterialTable","JwtService","Add","Edit","UserContext","AddTask","init","axios","getAxios","Tasks","tableRef","createRef","orders","setOrders","loading","setLoading","userContext","getData","url","user","user_type","id","get","vouchers","resp","data","status","tasks","reload","Action","action","icon","title","field","render","rowData","vendor","name","locality","isFreeAction","onClick","pageSize","pageSizeOptions","actionsColumnIndex","overflowY","headerStyle","zIndex","rowStyle"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport MaterialTable from 'material-table';\nimport JwtService from 'app/services/jwtService';\nimport Add from './Add';\nimport Edit from './Edit';\nimport { UserContext } from 'app/context/UserContext';\nimport AddTask from './AddTask';\nJwtService.init();\nconst axios = JwtService.getAxios();\nfunction Tasks() {\n\tconst tableRef = React.createRef();\n\tconst [orders, setOrders] = useState([]);\n\tconst [loading, setLoading] = useState(false);\n\tconst userContext = useContext(UserContext);\n\tuseEffect(() => {\n\t\tif (!loading) getData();\n\t\t// eslint-disable-next-line\n\t}, []);\n\n\tasync function getData() {\n\t\ttry {\n\t\t\tsetLoading(true);\n\t\t\tlet url = '/api/admin/tasks';\n\t\t\tif (userContext.user.user_type === 'creative') {\n\t\t\t\turl += `?user_id=${userContext.user.id}&status=active`;\n\t\t\t}\n\t\t\tconst vouchers = await axios.get(url);\n\t\t\tconst resp = vouchers.data;\n\t\t\tif (resp.status) {\n\t\t\t\tsetOrders(resp.data.tasks);\n\t\t\t} else {\n\t\t\t\tsetOrders([]);\n\t\t\t}\n\t\t\tsetLoading(false);\n\t\t} catch (ex) {\n\t\t\tsetOrders([]);\n\t\t\tsetLoading(false);\n\t\t}\n\t}\n\tfunction reload() {\n\t\treturn getData();\n\t}\n\n\tfunction Action({ action, data }) {\n\t\tswitch (action.icon) {\n\t\t\tcase 'save':\n\t\t\t\treturn userContext.user.user_type === 'creative' ? <></> : <Add reload={reload} />;\n\t\t\tcase 'edit':\n\t\t\t\treturn userContext.user.user_type === 'creative' ? (\n\t\t\t\t\t<AddTask task_id={data.id} key={data.id} />\n\t\t\t\t) : (\n\t\t\t\t\t<Edit reload={reload} slide_id={data.id ? data.id : null} key={data.id} />\n\t\t\t\t);\n\t\t\tcase 'view':\n\t\t\t\treturn <Edit reload={reload} slide_id={data.id ? data.id : null} is_view={true} key={data.id} />;\n\t\t\tdefault:\n\t\t\t\treturn <></>;\n\t\t}\n\t}\n\n\treturn (\n\t\t<MaterialTable\n\t\t\ttitle=\"Tasks\"\n\t\t\tdata={orders}\n\t\t\tref={tableRef}\n\t\t\tcolumns={[\n\t\t\t\t{\n\t\t\t\t\ttitle: 'Task',\n\t\t\t\t\tfield: 'task'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: 'Description',\n\t\t\t\t\tfield: 'description'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: 'Type',\n\t\t\t\t\tfield: 'task_type'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: 'Vendor',\n\t\t\t\t\tfield: 'vendor.name',\n\t\t\t\t\trender: rowData => {\n\t\t\t\t\t\treturn rowData.vendor ? `${rowData.vendor.name} (${rowData.vendor.locality})` : '';\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: 'Duration',\n\t\t\t\t\tfield: 'duration'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: 'Status',\n\t\t\t\t\tfield: 'status'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: 'Total Tasks',\n\t\t\t\t\tfield: 'no_of_tasks'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: 'Completed Tasks',\n\t\t\t\t\tfield: 'no_of_tasks_completed'\n\t\t\t\t}\n\t\t\t]}\n\t\t\tisLoading={loading}\n\t\t\tactions={[\n\t\t\t\t{\n\t\t\t\t\ticon: 'save',\n\t\t\t\t\tisFreeAction: true,\n\t\t\t\t\tonClick: () => {}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ticon: 'edit',\n\t\t\t\t\tonClick: () => {}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ticon: 'view',\n\t\t\t\t\tonClick: () => {}\n\t\t\t\t}\n\t\t\t]}\n\t\t\toptions={{\n\t\t\t\tpageSize: 10,\n\t\t\t\tpageSizeOptions: [10, 20, 50],\n\t\t\t\tactionsColumnIndex: -1,\n\t\t\t\toverflowY: 'visible',\n\t\t\t\theaderStyle: {\n\t\t\t\t\tzIndex: -1\n\t\t\t\t},\n\t\t\t\trowStyle: {\n\t\t\t\t\tzIndex: -1\n\t\t\t\t}\n\t\t\t}}\n\t\t\tcomponents={{\n\t\t\t\tAction\n\t\t\t}}\n\t\t/>\n\t);\n}\n\nexport default Tasks;\n"]},"metadata":{},"sourceType":"module"}