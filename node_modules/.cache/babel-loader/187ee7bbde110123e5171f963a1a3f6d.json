{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Button,withStyles}from'@material-ui/core';import RedemptionDialog from'./RedemptionDialog';import JwtService from'app/services/jwtService';var styles=function styles(){return{button:{marginLeft:4}};};function Add(_ref){var classes=_ref.classes,reload=_ref.reload;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var axios=JwtService.getAxios();function handleOpen(){setOpen(true);}function handleClose(){setOpen(false);}function handleClick(_x,_x2,_x3){return _handleClick.apply(this,arguments);}function _handleClick(){_handleClick=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(premium_key,voucher_id,vendor_id){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.prev=1;_context.next=4;return axios.post('/api/admin/redemption',{premium_key:premium_key,voucher_id:voucher_id,vendor_id:vendor_id});case 4:res=_context.sent;if(res.data.status){setOpen(false);reload();}else{setMessage(res.data.message);setError(res.data.errors);}_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.log(_context.t0);setError(_context.t0);case 12:setLoading(false);case 13:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return _handleClick.apply(this,arguments);}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(RedemptionDialog,{open:open,handleClose:handleClose,title:\"Add manual redemption\",handleClick:handleClick,loading:loading,error:error,errorMessage:message}),/*#__PURE__*/React.createElement(Button,{onClick:handleOpen,className:classes.button,variant:\"contained\",color:\"primary\"},\"Manual Redemption\"));}export default withStyles(styles)(Add);","map":null,"metadata":{},"sourceType":"module"}