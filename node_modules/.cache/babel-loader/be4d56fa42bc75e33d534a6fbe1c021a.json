{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"D:\\\\Projects\\\\live\\\\src\\\\app\\\\main\\\\task\\\\Posts.js\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport MaterialTable from 'material-table';\nimport JwtService from 'app/services/jwtService';\nimport { UserContext } from 'app/context/UserContext';\nimport moment from 'moment';\nvar axios = JwtService.getAxios();\n\nfunction Posts(_ref) {\n  var id = _ref.id;\n  var tableRef = React.createRef();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      orders = _useState2[0],\n      setOrders = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var userContext = useContext(UserContext);\n  useEffect(function () {\n    if (!loading) getData(); // eslint-disable-next-line\n  }, []);\n\n  function getData() {\n    return _getData.apply(this, arguments);\n  }\n\n  function _getData() {\n    _getData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var url, vouchers, resp;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              setLoading(true);\n              url = id ? \"/api/admin/tasks/\".concat(id, \"/posts\") : \"/api/admin/posts\";\n\n              if (id && userContext.user.user_type === 'creative') {\n                url += \"?user_id=\".concat(userContext.user.id);\n              }\n\n              _context.next = 6;\n              return axios.get(url);\n\n            case 6:\n              vouchers = _context.sent;\n              resp = vouchers.data;\n\n              if (resp.status) {\n                setOrders(resp.data.posts);\n              } else {\n                setOrders([]);\n              }\n\n              setLoading(false);\n              _context.next = 16;\n              break;\n\n            case 12:\n              _context.prev = 12;\n              _context.t0 = _context[\"catch\"](0);\n              setOrders([]);\n              setLoading(false);\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 12]]);\n    }));\n    return _getData.apply(this, arguments);\n  }\n\n  function columns() {\n    var _this = this;\n\n    var column = [{\n      title: 'Title',\n      field: 'title',\n      render: function render(rowData) {\n        return /*#__PURE__*/React.createElement(\"a\", {\n          href: \"\".concat(rowData.link),\n          target: \"_blank\",\n          rel: \"noopener noreferrer\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 6\n          }\n        }, rowData.title);\n      }\n    }, {\n      title: 'Link',\n      field: 'link',\n      render: function render(rowData) {\n        return /*#__PURE__*/React.createElement(\"a\", {\n          href: \"\".concat(rowData.link),\n          target: \"_blank\",\n          rel: \"noopener noreferrer\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 6\n          }\n        }, rowData.link);\n      }\n    }];\n\n    if (!id) {\n      column.push({\n        title: 'Vendor',\n        field: 'vendor_name'\n      });\n    }\n\n    column.push({\n      title: 'Created At',\n      field: 'created_at',\n      render: function render(rowData) {\n        var date = moment(rowData.created_at);\n        return date.format('dddd, MMMM Do YYYY, h:mm:ss a');\n      }\n    });\n    return column;\n  }\n\n  return /*#__PURE__*/React.createElement(MaterialTable, {\n    title: \"Posts\",\n    data: orders,\n    ref: tableRef,\n    columns: columns(),\n    isLoading: loading,\n    options: {\n      pageSize: 10,\n      pageSizeOptions: [10, 20, 50],\n      actionsColumnIndex: -1,\n      exportButton: true\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 3\n    }\n  });\n}\n\nexport default Posts;","map":{"version":3,"sources":["D:/Projects/live/src/app/main/task/Posts.js"],"names":["React","useContext","useEffect","useState","MaterialTable","JwtService","UserContext","moment","axios","getAxios","Posts","id","tableRef","createRef","orders","setOrders","loading","setLoading","userContext","getData","url","user","user_type","get","vouchers","resp","data","status","posts","columns","column","title","field","render","rowData","link","push","date","created_at","format","pageSize","pageSizeOptions","actionsColumnIndex","exportButton"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\r\nimport MaterialTable from 'material-table';\r\nimport JwtService from 'app/services/jwtService';\r\nimport { UserContext } from 'app/context/UserContext';\r\nimport moment from 'moment';\r\n\r\nconst axios = JwtService.getAxios();\r\n\r\nfunction Posts({ id }) {\r\n\tconst tableRef = React.createRef();\r\n\tconst [orders, setOrders] = useState([]);\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst userContext = useContext(UserContext);\r\n\tuseEffect(() => {\r\n\t\tif (!loading) getData();\r\n\t\t// eslint-disable-next-line\r\n\t}, []);\r\n\r\n\tasync function getData() {\r\n\t\ttry {\r\n\t\t\tsetLoading(true);\r\n\t\t\tlet url = id ? `/api/admin/tasks/${id}/posts` : `/api/admin/posts`;\r\n\t\t\tif (id && userContext.user.user_type === 'creative') {\r\n\t\t\t\turl += `?user_id=${userContext.user.id}`;\r\n\t\t\t}\r\n\t\t\tconst vouchers = await axios.get(url);\r\n\t\t\tconst resp = vouchers.data;\r\n\t\t\tif (resp.status) {\r\n\t\t\t\tsetOrders(resp.data.posts);\r\n\t\t\t} else {\r\n\t\t\t\tsetOrders([]);\r\n\t\t\t}\r\n\t\t\tsetLoading(false);\r\n\t\t} catch (ex) {\r\n\t\t\tsetOrders([]);\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction columns() {\r\n\t\tconst column = [\r\n\t\t\t{\r\n\t\t\t\ttitle: 'Title',\r\n\t\t\t\tfield: 'title',\r\n\t\t\t\trender: rowData => (\r\n\t\t\t\t\t<a href={`${rowData.link}`} target=\"_blank\" rel=\"noopener noreferrer\">\r\n\t\t\t\t\t\t{rowData.title}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t)\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: 'Link',\r\n\t\t\t\tfield: 'link',\r\n\t\t\t\trender: rowData => (\r\n\t\t\t\t\t<a href={`${rowData.link}`} target=\"_blank\" rel=\"noopener noreferrer\">\r\n\t\t\t\t\t\t{rowData.link}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\tif (!id) {\r\n\t\t\tcolumn.push({\r\n\t\t\t\ttitle: 'Vendor',\r\n\t\t\t\tfield: 'vendor_name'\r\n\t\t\t});\r\n\t\t}\r\n\t\tcolumn.push({\r\n\t\t\ttitle: 'Created At',\r\n\t\t\tfield: 'created_at',\r\n\t\t\trender: rowData => {\r\n\t\t\t\tconst date = moment(rowData.created_at);\r\n\t\t\t\treturn date.format('dddd, MMMM Do YYYY, h:mm:ss a');\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn column;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<MaterialTable\r\n\t\t\ttitle=\"Posts\"\r\n\t\t\tdata={orders}\r\n\t\t\tref={tableRef}\r\n\t\t\tcolumns={columns()}\r\n\t\t\tisLoading={loading}\r\n\t\t\toptions={{\r\n\t\t\t\tpageSize: 10,\r\n\t\t\t\tpageSizeOptions: [10, 20, 50],\r\n\t\t\t\tactionsColumnIndex: -1,\r\n\t\t\t\texportButton: true\r\n\t\t\t}}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default Posts;\r\n"]},"metadata":{},"sourceType":"module"}