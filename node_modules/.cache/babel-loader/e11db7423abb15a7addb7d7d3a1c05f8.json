{"ast":null,"code":"import _toConsumableArray from\"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import FuseAnimateGroup from'@fuse/core/FuseAnimateGroup';import FuseUtils from'@fuse/utils';import{amber}from'@material-ui/core/colors';import Divider from'@material-ui/core/Divider';import Icon from'@material-ui/core/Icon';import IconButton from'@material-ui/core/IconButton';import Input from'@material-ui/core/Input';import ListItemIcon from'@material-ui/core/ListItemIcon';import ListItemText from'@material-ui/core/ListItemText';import Menu from'@material-ui/core/Menu';import MenuItem from'@material-ui/core/MenuItem';import{makeStyles}from'@material-ui/core/styles';import Tooltip from'@material-ui/core/Tooltip';import Typography from'@material-ui/core/Typography';import*as UserActions from'app/auth/store/actions';import clsx from'clsx';import React,{useEffect,useRef,useState}from'react';import{useDispatch,useSelector}from'react-redux';import{Link}from'react-router-dom';var useStyles=makeStyles({root:{'&.horizontal':{},'&.vertical':{flexDirection:'column'}},item:{textDecoration:'none!important',color:'inherit'},addIcon:{color:amber[600]}});function FuseShortcuts(props){var dispatch=useDispatch();var shortcuts=useSelector(function(_ref){var auth=_ref.auth;return auth.user.data.shortcuts;});var navigationData=useSelector(function(_ref2){var fuse=_ref2.fuse;return fuse.navigation;});var classes=useStyles(props);var searchInputRef=useRef(null);var _useState=useState(null),_useState2=_slicedToArray(_useState,2),addMenu=_useState2[0],setAddMenu=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),searchText=_useState4[0],setSearchText=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),searchResults=_useState6[0],setSearchResults=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),navigation=_useState8[0],setNavigation=_useState8[1];var shortcutItems=shortcuts?shortcuts.map(function(id){return FuseUtils.findById(navigationData,id);}):[];useEffect(function(){function flattenNavigation(){setNavigation(FuseUtils.getFlatNavigation(navigationData));}flattenNavigation();},[props.location,navigationData]);function addMenuClick(event){setAddMenu(event.currentTarget);}function addMenuClose(){setAddMenu(null);}function search(ev){var newSearchText=ev.target.value;setSearchText(newSearchText);if(newSearchText.length!==0&&navigation){setSearchResults(navigation.filter(function(item){return item.title.toLowerCase().includes(newSearchText.toLowerCase());}));return;}setSearchResults(null);}function toggleInShortcuts(id){var newShortcuts=_toConsumableArray(shortcuts);newShortcuts=newShortcuts.includes(id)?newShortcuts.filter(function(_id){return id!==_id;}):[].concat(_toConsumableArray(newShortcuts),[id]);dispatch(UserActions.updateUserShortcuts(newShortcuts));}function ShortcutMenuItem(_ref3){var item=_ref3.item,onToggle=_ref3.onToggle;return/*#__PURE__*/React.createElement(Link,{to:item.url,className:classes.item,role:\"button\"},/*#__PURE__*/React.createElement(MenuItem,{key:item.id},/*#__PURE__*/React.createElement(ListItemIcon,{className:\"min-w-40\"},item.icon?/*#__PURE__*/React.createElement(Icon,null,item.icon):/*#__PURE__*/React.createElement(\"span\",{className:\"text-20 font-bold uppercase text-center\"},item.title[0])),/*#__PURE__*/React.createElement(ListItemText,{primary:item.title}),/*#__PURE__*/React.createElement(IconButton,{onClick:function onClick(ev){ev.preventDefault();ev.stopPropagation();onToggle(item.id);}},/*#__PURE__*/React.createElement(Icon,{color:\"action\"},shortcuts.includes(item.id)?'star':'star_border'))));}return/*#__PURE__*/React.createElement(\"div\",{className:clsx(classes.root,props.variant,'flex flex-1',props.variant==='vertical'&&'flex-grow-0 flex-shrink',props.className)},/*#__PURE__*/React.createElement(FuseAnimateGroup,{enter:{animation:'transition.expandIn'},className:clsx('flex flex-1',props.variant==='vertical'&&'flex-col')},shortcutItems.map(function(item){return item&&/*#__PURE__*/React.createElement(Link,{to:item.url,key:item.id,className:classes.item,role:\"button\"},/*#__PURE__*/React.createElement(Tooltip,{title:item.title,placement:props.variant==='horizontal'?'bottom':'left'},/*#__PURE__*/React.createElement(IconButton,{className:\"w-40 h-40 p-0\"},item.icon?/*#__PURE__*/React.createElement(Icon,null,item.icon):/*#__PURE__*/React.createElement(\"span\",{className:\"text-20 font-bold uppercase\"},item.title[0]))));}),/*#__PURE__*/React.createElement(Tooltip,{title:\"Click to add/remove shortcut\",placement:props.variant==='horizontal'?'bottom':'left'},/*#__PURE__*/React.createElement(IconButton,{className:\"w-40 h-40 p-0\",\"aria-owns\":addMenu?'add-menu':null,\"aria-haspopup\":\"true\",onClick:addMenuClick},/*#__PURE__*/React.createElement(Icon,{className:classes.addIcon},\"star\")))),/*#__PURE__*/React.createElement(Menu,{id:\"add-menu\",anchorEl:addMenu,open:Boolean(addMenu),onClose:addMenuClose,classes:{paper:'mt-48'},onEntered:function onEntered(){searchInputRef.current.focus();},onExited:function onExited(){setSearchText('');}},/*#__PURE__*/React.createElement(\"div\",{className:\"p-16 pt-8\"},/*#__PURE__*/React.createElement(Input,{inputRef:searchInputRef,value:searchText,onChange:search,placeholder:\"Search for an app or page\",className:\"\",fullWidth:true,inputProps:{'aria-label':'Search'}})),/*#__PURE__*/React.createElement(Divider,null),searchText.length!==0&&searchResults&&searchResults.map(function(item){return/*#__PURE__*/React.createElement(ShortcutMenuItem,{key:item.id,item:item,onToggle:function onToggle(){return toggleInShortcuts(item.id);}});}),searchText.length!==0&&searchResults.length===0&&/*#__PURE__*/React.createElement(Typography,{color:\"textSecondary\",className:\"p-16 pb-8\"},\"No results..\"),searchText.length===0&&shortcutItems.map(function(item){return item&&/*#__PURE__*/React.createElement(ShortcutMenuItem,{key:item.id,item:item,onToggle:function onToggle(){return toggleInShortcuts(item.id);}});})));}FuseShortcuts.defaultProps={variant:'horizontal'};export default React.memo(FuseShortcuts);","map":null,"metadata":{},"sourceType":"module"}