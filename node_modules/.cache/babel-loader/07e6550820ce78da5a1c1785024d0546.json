{"ast":null,"code":"import _toConsumableArray from\"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:\\\\Projects\\\\live\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import MaterialTable from'material-table';import JwtService from'app/services/jwtService';import Edit from'./Edit';import{Grid,Typography,Paper,TextField,Button}from'@material-ui/core';import FusePageSimple from'@fuse/core/FusePageSimple';import FuseChipSelect from'@fuse/core/FuseChipSelect';function Customers(){var tableRef=React.createRef();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),orders=_useState2[0],setOrders=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),search=_useState6[0],setSearch=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),corporateApps=_useState8[0],setCorporateApps=_useState8[1];var _useState9=useState({value:0,label:'Vouch Main'}),_useState10=_slicedToArray(_useState9,2),corporateApp=_useState10[0],setCorporateApp=_useState10[1];useEffect(function(){getCorporateApps();},[]);function getData(){return _getData.apply(this,arguments);}function _getData(){_getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var axios,vouchers,resp;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setLoading(true);JwtService.init();axios=JwtService.getAxios();_context.next=6;return axios.get('/api/admin/search-customer',{params:{query_param:search,corporate_app:corporateApp.value}});case 6:vouchers=_context.sent;resp=vouchers.data;if(resp.status){setOrders(resp.data);}else{setOrders([]);}setLoading(false);_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);setOrders([]);setLoading(false);case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);}));return _getData.apply(this,arguments);}function getCorporateApps(){return _getCorporateApps.apply(this,arguments);}function _getCorporateApps(){_getCorporateApps=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var axios,vouchers,resp;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;setLoading(true);JwtService.init();axios=JwtService.getAxios();_context2.next=6;return axios.get('/api/admin/corporateApp');case 6:vouchers=_context2.sent;resp=vouchers.data;if(resp.status){setCorporateApps([{id:0,name:'Vouch Main'}].concat(_toConsumableArray(resp.data.corporate_app)));}else{setCorporateApps([]);}setLoading(false);_context2.next=16;break;case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](0);setCorporateApps([]);setLoading(false);case 16:case\"end\":return _context2.stop();}}},_callee2,null,[[0,12]]);}));return _getCorporateApps.apply(this,arguments);}function reload(){return getData();}function Action(_ref){var action=_ref.action,data=_ref.data;switch(action.icon){case'view':return/*#__PURE__*/React.createElement(Edit,{reload:reload,slide_id:data.id?data.id:null,corporate_app:corporateApp.value,is_view:true});default:return/*#__PURE__*/React.createElement(React.Fragment,null);}}function onChange(event){var target=event.target;setSearch(target.value);}function handleChange(value){console.log(value);setCorporateApp(value);}function onKeyPress(event){if(event.key==='Enter'&&search){getData();}}return/*#__PURE__*/React.createElement(FusePageSimple,{header:/*#__PURE__*/React.createElement(Grid,{container:true,item:true,justify:\"flex-end\",direction:\"column\",className:\"pl-12 pb-12\"},/*#__PURE__*/React.createElement(Typography,{variant:\"h4\"},\"Customers\")),content:/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Grid,{container:true,className:\"p-20\",alignItems:\"baseline\"},/*#__PURE__*/React.createElement(Grid,{item:true,md:12,className:\"mt-8\"},/*#__PURE__*/React.createElement(Paper,{elevation:4},/*#__PURE__*/React.createElement(Grid,{container:true,spacing:4,alignItems:\"center\",className:\"ml-12\"},/*#__PURE__*/React.createElement(Grid,{item:true,md:4},/*#__PURE__*/React.createElement(TextField,{id:\"search\",name:\"search\",label:\"Search Query\",InputLabelProps:{shrink:true},helperText:\"Search with email, mobile number and premium key\",fullWidth:true,variant:\"outlined\",onChange:onChange,onKeyPress:onKeyPress,required:true})),/*#__PURE__*/React.createElement(Grid,{item:true,md:4,className:\"mb-12\"},/*#__PURE__*/React.createElement(FuseChipSelect,{className:\"mt-8 mb-8\",value:corporateApp,onChange:function onChange(value){return handleChange(value);},textFieldProps:{label:'App Name',InputLabelProps:{shrink:true},variant:'outlined'},options:corporateApps.map(function(corporateApp){return{value:corporateApp.id,label:corporateApp.name};}),fullWidth:true})),/*#__PURE__*/React.createElement(Grid,{item:true,md:4,className:\"mb-12\"},/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"primary\",disabled:!search,className:\"mt-6\",onClick:getData},\"Search\")))))),/*#__PURE__*/React.createElement(MaterialTable,{data:orders,ref:tableRef,columns:[{title:'First Name',field:'fname'},{title:'Last Name',field:'lname'},{title:'Email',field:'email'},{title:'Phone',field:'phone'},{title:'Membership',field:'membership.name'}],isLoading:loading,actions:[{icon:'view',onClick:function onClick(){}}],options:{pageSize:10,pageSizeOptions:[10,20,50],actionsColumnIndex:-1,showTitle:false,overflowY:'visible',headerStyle:{zIndex:0}},components:{Action:Action}}))});}export default Customers;","map":null,"metadata":{},"sourceType":"module"}